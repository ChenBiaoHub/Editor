System.register("chunks:///_virtual/AdsManager.ts",["cc","./JSCallback.ts","./PluginFactoryManager.ts","./EventManager.ts","./LogManager.ts"],(function(n){var a,t,e,o,r;return{setters:[function(n){a=n.cclegacy},function(n){t=n.JSCallBakEnum},function(n){e=n.PluginFactoryManager},function(n){o=n.EventManager},function(n){r=n.LogManager}],execute:function(){a._RF.push({},"56862BvgyxD9pkhJlID2AAb","AdsManager",void 0);n("AdsManager",function(){function n(){}var a=n.prototype;return a.showBanner=function(){e.factory().getAds().showBannerAD()},a.hideBanner=function(){e.factory().getAds().hideBannerAD()},a.showVideo=function(n){o.ins.once(t.VideoFinish,(function(a){var t=JSON.parse(a.data);t&&t.success?(r.ins.log("广告播放完毕_成功",a.data),n(!0)):(r.ins.log("广告播放完毕_失败",a.data),n(!1))}),this),e.factory().getAds().showRewardAD()},n}());a._RF.pop()}}}));

System.register("chunks:///_virtual/AssetsHotUpdateManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XHW.ts"],(function(e){var t,s,i,n,o,a;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,s=e.createClass},function(e){i=e.cclegacy,n=e.sys,o=e.native},function(e){a=e.XHW}],execute:function(){i._RF.push({},"1c911MnfKNPlqKBV3HNbu3w","AssetsHotUpdateManager",void 0);var r=function(){for(var e,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];(e=console).log.apply(e,["[AssetsHotUpdate]"].concat(s))},l=function(){for(var e,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];(e=console).error.apply(e,["[AssetsHotUpdate]"].concat(s))},h=e("AssetsHotUpdateEvent",function(e){return e.EVENT_PATCH_START="EVENT_PATCH_START",e.EVENT_PATCH_PROGRESS="EVENT_PATCH_PROGRESS",e.EVENT_PATCH_FINISHED="EVENT_PATCH_FINISHED",e.EVENT_PATCH_UNNEED="EVENT_PATCH_UNNEED",e.EVENT_VERSION_CHECK_FAILED="EVENT_VERSION_CHECK_FAILED",e}({})),d=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];for(var i=arguments.length,n="",o=0;o<i;o++)n=(n+(""===n?"":"/")+arguments[o]).replace(/(\/|\\\\)$/,"");return n},c=/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,f=function e(t,s,i){if(t.length>0){var n=t.shift(),o=typeof n,a=!1,r=function(s){a||(a=!0,e(t,s,i))};if("function"===o)n(s,r);else{if(!("object"===o&&n instanceof Array))throw new Error(" handlerQueue funcs 类型错误 !");e(n,s,r)}}else i(!0)},u="gameres",v="version.txt",p="gameres_patch",g=[".mp3",".wav",".ogg",".mp4",".m4a",".ttf",".skel",".bin"];e("AssetsHotUpdate",function(){function e(e,t){if(this._isFSActive=!1,this.versionFile="",this.localMd5ListFile="",this.remoteMd5DownloadFile="",this.updatingTempDir="",this.remoteAssetsPath="",this.localAssetsPath="",this._localAssetsVersion="",this.remoteAssetsVersion="",this.needdownloadList=[],this.eventCallback=null,this.isLock=!1,this.downloadIndex=0,this.version="1.0",this.downloadOpt={url:"",storagePath:"",retry:2,priority:1},this.pkg="",this._downloadFileSize=0,this.xhr=null,this.version=e,void 0!==o&&o.fileUtils){this._isFSActive=!0;var s=o.fileUtils;this.updatingTempDir=d(s.getWritablePath(),"assetsHotUpdateTemp"),s.removeDirectory&&s.removeDirectory(this.updatingTempDir),this.versionFile=d(u,v);var i=s.getSearchPaths();r("searchPath => ",i);var n=d(i[0],"__fs.txt"),a=s.getStringFromFile(n);if(a){r("__fs.txt =>",a);var l=a.split("|");this.pkg=l[0]}else for(var h=t.split(".");h.length>0;){var c="gameres/"+h.join(".")+".bin";if(s.isFileExist(c)){this.pkg=h.join(".");break}h.pop()}this.localMd5ListFile="gameres/"+this.pkg+".bin",r(" localMd5ListFile=> ",this.localMd5ListFile)}}var i=e.prototype;return i.check=function(e,t){var s=this;if(this.isLock||!this._isFSActive)return t(0,0);if(this._refreshUrlAndPath(e,this.version),this.remoteAssetsPath.indexOf("http")<0)return l("远程资源地址错误",this.remoteAssetsPath),t(0,0);this._downloadFileSize=0;var i=function(e,i){s.isLock=!1,r(" downloadlist ",JSON.stringify(s.needdownloadList)),t(s.needdownloadList.length,s._downloadFileSize)};if(this.isLock=!0,!this.localAssetsVersion)return r(" 本地没有 version.txt ，当前为非热更新版本，跳过"),i(h.EVENT_PATCH_UNNEED);var n="";f([function(e,t){var i=d(s.remoteAssetsPath,u,v);r("远程资源版本号文件",i);var o=setTimeout((function(){r("request timeout! ",i),t()}),2e3);s.httpGet({url:i+"?t="+Date.now(),retry:2},(function(e){clearTimeout(o),n=e,t()}))},function(e,t){if(!n)return l(" 热更资源号拉取失败!"),i(h.EVENT_VERSION_CHECK_FAILED);s.remoteAssetsVersion=n,r("CDN服务器资源版本号 "+n);var o=parseInt(n.replace(/[^\d]+/g,"")||"0");o=isNaN(o)?0:o;var a=parseInt(s.localAssetsVersion.replace(/[^\d]+/g,"")||"0");o>(a=isNaN(a)?0:a)?t("download"):(r("不需要热更，本地版本号 "+s.localAssetsVersion+" >= CDN版本号"+n),t("check"))},function(e,t){s.needdownloadList.length=0,r("本地比对文件地址",s.localMd5ListFile);var i=o.fileUtils.getStringFromFile(s.localMd5ListFile);if(!i)return l("本地比对文件为空"),s.isLock=!1,t();"download"===e?s.downloadAndDiff(i,t):(s.checkLocalAssetsISIntegrated(i,s.needdownloadList),t())}],null,i)},i._refreshUrlAndPath=function(e,t){if(this._isFSActive){var s=n.localStorage.getItem("_appVersion");r("AppVersion = "+t),r("preAppVersion = "+s),n.localStorage.setItem("_appVersion",t),this.remoteAssetsPath=e;var i=o.fileUtils,a=i.getWritablePath();if(this.localAssetsPath=a+p+t,s&&s!=t){var l=a+p+s;r(" 删除上个版本的热更资源目录 ",l),i.removeDirectory(l)}i.isDirectoryExist(this.localAssetsPath)||i.createDirectory(this.localAssetsPath),r(" cdn资源地址 "+this.remoteAssetsPath),r(" 本地资源地址 "+this.localAssetsPath)}},i.downloadAndDiff=function(e,t){var s=this,i=d(this.remoteAssetsPath,this.localMd5ListFile)+"?t="+Date.now();r("远程比对文件地址 "+i),this.remoteMd5DownloadFile=d(this.updatingTempDir,this.localMd5ListFile);var n=!1,h=setTimeout((function(){clearTimeout(h),n||(n=!0,l(" downloadAndDiff  下载3秒超时未能正确获取,break "+i),t())}),3e3);this.downloadOpt.url=i,this.downloadOpt.storagePath=this.remoteMd5DownloadFile,this.downloadOpt.retry=2,a.downloadManager.download(this.downloadOpt,(function(i){do{if(clearTimeout(h),n)return;if(n=!0,!i)break;var a=o.fileUtils.getStringFromFile(s.remoteMd5DownloadFile);return s.compareLocalAndRemote(e,a,s.needdownloadList),r(" 需要更新的文件列表  ",s.needdownloadList.length),t()}while(0);t()}))},i._parseMD5Filelist=function(e){var t={ver:"v4",dirnames:null,filelist:null};if(e)try{var s=JSON.parse(e),i=s.shift();i instanceof Array?(t.ver=i[0],t.dirnames=i[1].split(",")):(t.ver=i.ver,t.dirnames=i.dirs.split(",")),r("parseMD5Filelist header => ",JSON.stringify(t)),t.filelist=s}catch(e){l("parseMD5Filelist => ",e.message)}return t},i.compareLocalAndRemote=function(e,s,i){if(r(" 本地比对文件 size "+e.length),r(" 下载比对文件 size "+s.length),e.length===s.length&&e===s)return r(" localMd5FileListContent == remoteMd5FileListContent "),this.checkLocalAssetsISIntegrated(e,i);try{r("解析本地bin文件内容");var n=this._parseMD5Filelist(e);if(!n.filelist)return;r("解析下载的bin文件内容");var a=this._parseMD5Filelist(s);if(!a.filelist)return;for(var l,h={},d=t(a.filelist);!(l=d()).done;){var c=l.value;h[c[0]]=c}for(var f,u=o.fileUtils,v=t(n.filelist);!(f=v()).done;){var p=f.value,g=p[0];if(h[g]){var A=this.exchangeRealPath(g,n.dirnames,p[1]);u.isFileExist(A)&&delete h[g]}}for(var m in h){var _=h[m];i.push(this.exchangeRealPath(m,a.dirnames,_[1])),_[2]&&(this._downloadFileSize+=_[2])}}catch(e){var w=e;e.message&&(w=e.message),r("分析比对文件报错",w)}},i.checkLocalAssetsISIntegrated=function(e,s){r(" checkLocalAssetsISIntegrated => ");try{var i=this._parseMD5Filelist(e);if(!i.filelist)return;for(var n,a=new Set,h=o.fileUtils,d=t(i.filelist);!(n=d()).done;){var c=n.value,f=c[0];if(!a.has(f)){a.add(f);var u=this.exchangeRealPath(f,i.dirnames,c[1]);h.isFileExist(u)||(s.push(u),c.length>2&&(this._downloadFileSize+=c[2]))}}a.clear()}catch(e){l("checkLocalAssetsISIntegrated",e.message)}},i.start=function(e,t){var s=this;return this._isFSActive?e?this.check(e,(function(e,i){r(" 需要下载的文件总大小 ",e,i),s.start(null,t)})):this.isLock?r(" 当前Lock状态, 不能进行热更新！"):void(this.needdownloadList.length>0?(r(" needdownloadList = ",this.needdownloadList.length),this.downloadIndex=0,this.isLock=!0,this.eventCallback=t,this.eventCallback&&this.eventCallback(h.EVENT_PATCH_START,{res_version:this.remoteAssetsVersion,current:this.downloadIndex,total:this.needdownloadList.length}),this.assetsDownload()):(this.updateLocalVersion(),r("filelist diff 结束，不需要热更文件"),this.isLock=!1,this.needdownloadList.length=0,this.eventCallback=null,t&&t(h.EVENT_PATCH_UNNEED,null))):t(h.EVENT_PATCH_UNNEED,"")},i.assetsDownload=function(){var e=this;if(this.downloadIndex>=this.needdownloadList.length)return this.remoteMd5DownloadFile&&this.needdownloadList.push(this.localMd5ListFile),this.moveFiles();var t=this.needdownloadList[this.downloadIndex],s=d(this.remoteAssetsPath,t),i=d(this.updatingTempDir,t);r(" ------ DOWNLOAD ---- ",s,i);this.downloadOpt.url=s,this.downloadOpt.storagePath=i,this.downloadOpt.retry=3,a.downloadManager.download(this.downloadOpt,(function(t){t?(e.downloadIndex=e.downloadIndex+1,e.eventCallback&&e.eventCallback(h.EVENT_PATCH_PROGRESS,{current:e.downloadIndex,total:e.needdownloadList.length}),e.assetsDownload()):(r("热更新失败 "+s+" \n  "+i+" "),e.isLock=!1,e.eventCallback&&e.eventCallback(h.EVENT_PATCH_FINISHED,null),e.eventCallback=null)}))},i.moveFiles=function(){var e,s,i=o.fileUtils,n=this.needdownloadList.length;r("needdownloadList length ",n),r("将temp目录文件转移到 assets_patch");for(var a,l=t(this.needdownloadList);!(a=l()).done;){var f=a.value,u=d(this.updatingTempDir,f),v=d(this.localAssetsPath,f);i.removeFile(v),i.createDirectory((e=v,s=void 0,(s=c.exec(e))?s[2]:"")),i.renameFile(u,v)||r(u+" 转移失败 "+v)}this.needdownloadList.length=0,this.isLock=!1,this.updateLocalVersion(),this.isLock=!1,this.eventCallback&&this.eventCallback(h.EVENT_PATCH_FINISHED,{total:n}),this.eventCallback=null},i.updateLocalVersion=function(){if(this.remoteAssetsVersion){var e=o.fileUtils;r("更新后版本号应为",this.remoteAssetsVersion),e.writeStringToFile(this.remoteAssetsVersion,d(this.localAssetsPath,this.versionFile)),r("新版本号保存为 => ",e.getStringFromFile(this.versionFile))}},i.exchangeRealPath=function(e,t,s){if(!t.length)return"";var i=parseInt(e[0],16);if(e.indexOf(".")>0)return"gameres/"+t[i]+"/"+e;var n=function(e){var t=e.lastIndexOf(".");return t>0?e.substring(t):""}(s);return n&&g.indexOf(n)>=0?"gameres/"+t[i=Math.min(15,i)]+"/"+e+n:"gameres/"+t[i]+"/"+e+".dat"},i.removeCache=function(){this._isFSActive&&this.localAssetsPath&&(o.fileUtils.purgeCachedEntries(),o.fileUtils.removeDirectory(this.localAssetsPath))},i.httpGet=function(e,t){var s=this;if(!e.url||e.retry<0)return t("");e.method=e.method||"GET",e.method=e.method.toUpperCase();var i=new XMLHttpRequest;this.xhr=i,this.xhr.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<400){var n=i.responseText;t(n)}else l(" httpGet retry !"),e.retry=e.retry-1,s.xhr=null,s.httpGet(e,t)},this.xhr.open(e.method,e.url,!0),this.xhr.send()},s(e,[{key:"localAssetsVersion",get:function(){if(!this._localAssetsVersion){if(this._isFSActive)this._localAssetsVersion=o.fileUtils.getStringFromFile(this.versionFile);else{var e=new Date;this._localAssetsVersion=""+e.getFullYear()+(e.getMonth()+1)+e.getDate()+e.getHours()+e.getMinutes()}r("本地资源版本号",this._localAssetsVersion)}return this._localAssetsVersion}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/AsyncManager.ts",["cc"],(function(n){var i;return{setters:[function(n){i=n.cclegacy}],execute:function(){i._RF.push({},"6a074JJB5ZMJr4eO8E96C9H","AsyncManager",void 0);n("AsyncManager",function(){function n(){this.count=0,this.finishCall=void 0}var i=n.prototype;return i.setFinishCall=function(n){this.finishCall=n},i.addFunc=function(n){var i=this;n&&(this.count++,n((function(){i.doFinish()})))},i.doFinish=function(){this.count--,this.count<=0&&(this.finishCall&&this.finishCall(),this.finishCall=null)},n}());i._RF.pop()}}}));

System.register("chunks:///_virtual/AsyncQueue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(s){var n,i,e;return{setters:[function(s){n=s.createForOfIteratorHelperLoose,i=s.createClass},function(s){e=s.cclegacy}],execute:function(){e._RF.push({},"c8ba10zjOpJW5oBfysmBfiC","AsyncQueue",void 0);var u=s("AsyncQueue",function(){function s(){this._runningAsyncTask=null,this._queues=[],this._isProcessingTaskUUID=0,this._enable=!0,this.complete=null,this._timeoutId=null}s.allocTask=function(n,i){var e=s.uuid_count++;if(s.taskPool.length>0){var u=s.taskPool.pop();return u.uuid=e,u.params=n,u.priority=i,u}return{uuid:e,callbacks:[],params:n,priority:i}},s.freeTask=function(n){n&&(n.params=null,s.taskPool.length<10?(n.callbacks.length=0,n.priority=0,s.taskPool.push(n)):n.callbacks=null)};var e=s.prototype;return e.logprint=function(){var s={running:"",queues:[]};this._runningAsyncTask.params&&this._runningAsyncTask.params.des&&(s.running=this._runningAsyncTask.params.des);for(var i,e=n(this._queues);!(i=e()).done;){var u=i.value;u.params?s.queues.push(u.params.desc):s.queues.push("")}return s},e.push=function(n,i,e){void 0===i&&(i=null),void 0===e&&(e=0);var u=s.allocTask(i,e);return u.callbacks.push(n),this._queues.push(u),this._queues.sort((function(s,n){return n.priority-s.priority})),u.uuid},e.pushMulti=function(n){for(var i,e=s.allocTask(n,0),u=arguments.length,t=new Array(u>1?u-1:0),r=1;r<u;r++)t[r-1]=arguments[r];return(i=e.callbacks).push.apply(i,t),this._queues.push(e),this._queues.sort((function(s,n){return n.priority-s.priority})),e.uuid},e.remove=function(n){if(this._runningAsyncTask.uuid!==n){for(var i=0;i<this._queues.length;i++)if(this._queues[i].uuid===n){s.freeTask(this._queues[i]),this._queues.splice(i,1);break}}else console.log("正在执行的任务不可以移除")},e.clear=function(){for(var i,e=n(this._queues);!(i=e()).done;){var u=i.value;s.freeTask(u)}this._queues.length=0,this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=null},e.next=function(n,i){void 0===i&&(i=null),s.globalEnable&&(s.freeTask(this._runningAsyncTask),this._isProcessingTaskUUID===n?(this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.play(i)):(this._runningAsyncTask&&console.log(this._runningAsyncTask),this._runningAsyncTask=null))},e.step=function(){this.isProcessing&&this.next(this._isProcessingTaskUUID)},e.play=function(s){var n=this;if(void 0===s&&(s=null),!this.isProcessing&&this._enable){var i=this._queues.shift();if(i){this._runningAsyncTask=i;var e=i.uuid;this._isProcessingTaskUUID=e;var u=i.callbacks;if(1==u.length){u[0]((function(s){void 0===s&&(s=null),n.next(e,s)}),i.params,s)}else for(var t=u.length,r=[],a=function(s){void 0===s&&(s=null),--t,r.push(s||null),0===t&&n.next(e,r)},l=t,o=0;o<l;o++)u[o](a,i.params,s)}else this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.complete&&this.complete(s)}},e.yieldTime=function(s,n){void 0===n&&(n=null);var i=this;this.push((function(e,u,t){var r=setTimeout((function(){clearTimeout(r),i._timeoutId=null,i=null,n&&n(),e(t)}),s);i._timeoutId=r}),{des:"AsyncQueue.yieldTime"+s})},s.excuteTimes=function(s,n){void 0===n&&(n=null);var i=s;return function(){0===--i&&n&&n()}},i(s,[{key:"queues",get:function(){return this._queues}},{key:"enable",get:function(){return this._enable},set:function(s){this._enable!==s&&(this._enable=s,s&&this.size>0&&this.play())}},{key:"size",get:function(){return this._queues.length}},{key:"isProcessing",get:function(){return this._isProcessingTaskUUID>0}},{key:"isStop",get:function(){return!(this._queues.length>0)&&!this.isProcessing}},{key:"runningParams",get:function(){return this._runningAsyncTask?this._runningAsyncTask.params:null}}]),s}());u.globalEnable=!0,u.uuid_count=1,u.taskPool=[],e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts","./XHW.ts","./LocalDbManager.ts"],(function(e){var o,u,i,t,n,a,c,l,s;return{setters:[function(e){o=e.inheritsLoose,u=e.createClass},function(e){i=e.cclegacy,t=e.AudioClip,n=e.AudioSource,a=e.Component},function(e){c=e.ResManager},function(e){l=e.XHW},function(e){s=e.LocalDBEnum}],execute:function(){i._RF.push({},"155ffN9WtFEGLR426D/jH9G","AudioManager",void 0);e("AudioManager",function(e){function i(){for(var o,u=arguments.length,i=new Array(u),t=0;t<u;t++)i[t]=arguments[t];return(o=e.call.apply(e,[this].concat(i))||this).audioSourceMap=new Map,o.audioSourcePool=[],o._musicVolume=null,o._effectVolume=null,o}o(i,e);var a=i.prototype;return a.playMusic=function(e,o){var u=this;if(!((o="number"==typeof o?o.inRange(0,1):this.musicVolume)<.1))if(this.audioSourceMap.has(e)){var i=this.audioSourceMap.get(e);i.volume=o,i.play()}else c.ins.load(e,t,(function(i,t){if(!i){var a=u.audioSourcePool.length>0?u.audioSourcePool.pop():u.node.addComponent(n);a.clip=t,a.volume=o,a.loop=!0,a.play(),u.audioSourceMap.set(e,a)}}))},a.playEffect=function(e,o){var u=this;if(void 0===o&&(o=1),(o="number"==typeof o?o.inRange(0,1):this.effectVolume)<.1)return-1;e instanceof t?this.playEffectWithClip(e,o):c.ins.load(e,t,(function(e,i){e||u.playEffectWithClip(i,o)}))},a.pauseAudio=function(e){var o=this.audioSourceMap.get(e);o&&o.pause()},a.pauseAllAudio=function(){this.audioSourceMap.forEach((function(e){e.pause()}))},a.playEffectWithClip=function(e,o){var u=this;void 0===o&&(o=1);var i=this.audioSourcePool.length>0?this.audioSourcePool.pop():this.node.addComponent(n);i.loop=!1,i.playOneShot(e,o);var t=e.getDuration();this.scheduleOnce((function(){u.audioSourcePool.push(i)}),t)},u(i,[{key:"musicVolume",get:function(){return null===this._musicVolume&&(this._musicVolume=l.localDb.getNumber(s.MusicVolume,1)),this._musicVolume},set:function(e){this._musicVolume!==e&&(e=e.inRange(0,1),this._musicVolume=e,l.localDb.save(s.MusicVolume,e))}},{key:"effectVolume",get:function(){return null===this._musicVolume&&(this._musicVolume=l.localDb.getNumber(s.EffectVolume,1)),this._effectVolume},set:function(e){this._effectVolume!==e&&(e=e.inRange(0,1),this._effectVolume=e,l.localDb.save(s.EffectVolume,e))}}]),i}(a));i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseCar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseLaneItem.ts","./CommonData.ts","./ButtonEffect.ts","./ViewMap.ts"],(function(t){var e,n,a,i,o,s,c,r,h,l;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,i=t.Node,o=t.UIOpacity,s=t.Vec3},function(t){c=t.BaseLaneItem},function(t){r=t.CommonData},function(t){h=t.ButtonEffect},function(t){l=t.ViewMap}],execute:function(){var u;n._RF.push({},"0de3baAjxpCHLM7Wzt8hZbo","BaseCar",void 0);var f=a.ccclass,d=(a.property,function(t){return t.left="left",t.right="right",t.leftBack="leftBack",t.rightBack="rightBack",t.straight="straight",t}(d||{}));t("BaseCar",f("BaseCar")(u=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).viewMap=void 0,e.clickCallback=void 0,e.status=void 0,e}e(n,t);var a=n.prototype;return a.onDestroy=function(){this.node.targetOff(this),this.clickCallback=null},a.onLoad=function(){this.viewMap=new l(this.node),this.node.on(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.getComponent(h)||this.node.addComponent(h),this.node.getComponent(o)||this.node.addComponent(o),this.setStatus(d.straight)},a.getPos=function(t){var e=t.y,n=t.x;return n=this.parentLane.laneWidth>r.ins.singleLaneWidth?t.x<0?-this.parentLane.laneWidth/4:this.parentLane.laneWidth/4:0,new s(n,e,0)},a.setStatus=function(t){this.status=t,this.shwoDir(t)},a.onTouchEnd=function(t){var e=t.target.name,n=e.replace("editor",""),a=n.charAt(0).toLowerCase()+n.slice(1,n.length);if(Object.values(d).includes(a))this.setStatus(a);else if("changeUp"===e){var i=this.node.angle+180;i>=360&&(i-=360),this.node.angle=i}else this.clickCallback&&this.clickCallback(this)},a.shwoDir=function(t){var e=this;Object.values(d).forEach((function(n){e.viewMap.get(n).active=t===n}))},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseLane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonData.ts","./EditorDefine.ts","./BaseMap.ts","./ButtonEffect.ts"],(function(t){var n,o,e,i,a,s,c,r,l,u,h;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Node,a=t.UIOpacity,s=t.UITransform,c=t.Vec3},function(t){r=t.CommonData},function(t){l=t.RoadDirectionEnum},function(t){u=t.BaseMap},function(t){h=t.ButtonEffect}],execute:function(){var d;o._RF.push({},"c17286X2a5HKqm/FOUNiNf1","BaseLane",void 0);var f=e.ccclass;e.property,t("BaseLane",f("BaseLane")(d=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).parentName="road",n.laneWidth=r.ins.singleLaneWidth,n.direction=l.Horizontal,n.clickCallback=void 0,n}n(o,t);var e=o.prototype;return e.onDestroy=function(){this.node.targetOff(this),this.clickCallback=null},e.onLoad=function(){this.node.on(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.getComponent(h)||this.node.addComponent(h),this.node.getComponent(a)||this.node.addComponent(a)},e.setData=function(t){this.direction=t,this.node.getComponent(s).setContentSize(this.laneWidth,t===l.Horizontal?720:1280)},e.getPos=function(t){var n=this.formatXpos(t.x),o=this.formatYpos(t.y);return console.log("是否是横向",this.direction===l.Horizontal),new c(n,o,0)},e.onTouchEnd=function(t){this.clickCallback&&this.clickCallback(this)},o}(u))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseLaneItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.Component}],execute:function(){var a;n._RF.push({},"628c1r53dBAg7A9G2FnBUN9","BaseLaneItem",void 0);var c=r.ccclass;r.property,e("BaseLaneItem",c("BaseLaneItem")(a=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).parentLane=void 0,t.awaysVertical=!1,t}return t(n,e),n.prototype.getPos=function(e){throw new Error("子类需要重写此方法")},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonData.ts","./EditorStatic.ts"],(function(n){var t,a,e,i,o,r;return{setters:[function(n){t=n.inheritsLoose},function(n){a=n.cclegacy,e=n._decorator,i=n.Component},function(n){o=n.CommonData},function(n){r=n.EditorStatic}],execute:function(){var s;a._RF.push({},"a1d28N52G9IUK5RgDjJ2WkD","BaseMap",void 0);var c=e.ccclass;e.property,n("BaseMap",c("BaseMap")(s=function(n){function a(){for(var t,a=arguments.length,e=new Array(a),i=0;i<a;i++)e[i]=arguments[i];return(t=n.call.apply(n,[this].concat(e))||this).parentName="",t}t(a,n);var e=a.prototype;return e.getPos=function(n,t){throw new Error("子类需要重写此方法")},e.formatXpos=function(n){var t=o.ins.viewSize.width/2,a=n+t-r.padding;return Math.floor(a/o.ins.singleLaneWidth)*o.ins.singleLaneWidth+o.ins.singleLaneWidth/2-t+r.padding},e.formatYpos=function(n){var t=n,a=Math.abs(t),e=t/a;return Math.floor((a+o.ins.singleLaneWidth/2)/o.ins.singleLaneWidth)*o.ins.singleLaneWidth*e},a}(i))||s);a._RF.pop()}}}));

System.register("chunks:///_virtual/BhvFSMManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,a,s,u,h,c,o;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){s=t.cclegacy,u=t._decorator,h=t.warn,c=t.log,o=t.Component}],execute:function(){var S,l,p,d,_;s._RF.push({},"fdce09Sia5I6KXGT+XJwmUb","BhvFSMManager",void 0);var f=u.ccclass,g=u.property;t("default",(S=g({visible:!0}),f((d=e((p=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).stateList=[],r(e,"debug",d,n(e)),r(e,"_currentState",_,n(e)),e._preState="",e.duration=0,e.dt=0,e.paused=!1,e}i(e,t);var s=e.prototype;return s.addState=function(t){null==this.getState(t)?(this.stateList.push(t),1==this.stateList.length&&(this._currentState=t)):h("FSM：this state ["+t+"] has been added")},s.addStates=function(t){var e=this;Object.keys(t).forEach((function(i){e.addState(t[i])}))},s.removeState=function(t){var e=this.getState(t);null!=e?this.stateList.splice(this.stateList.indexOf(e),1):h("FSM：this state ["+t+"] does not exist, no need to be removed")},s.getState=function(t){return-1!==this.stateList.indexOf(t)?t:null},s.resetState=function(){this.changeState()},s.changeState=function(t){void 0===t&&(t=this._preState);var e=this.getState(t);null!=e?(null!=this._currentState&&this["on"+this._currentState+"Exit"]&&this["on"+this._currentState+"Exit"](this._currentState,this._preState),this._preState=this._currentState,this._currentState=e,this.duration=0,this["on"+this._currentState+"Enter"]&&this["on"+this._currentState+"Enter"](this._currentState,this._preState)):c("FSM：this state ["+t+"] is not in state group")},s.update=function(t){this.paused||0==t||null!=this._currentState&&(this.dt=t,this.duration+=t,this["on"+this._currentState+"Update"]&&this["on"+this._currentState+"Update"](this._currentState,this._preState))},s.RemoveAllState=function(){null!=this._currentState&&(this["on"+this._currentState+"Exit"]&&this["on"+this._currentState+"Exit"](this._currentState,this._preState),this._currentState=null),this.stateList.length=0},a(e,[{key:"currentState",get:function(){return this._currentState}},{key:"preState",get:function(){return this._preState}}]),e}(o)).prototype,"debug",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=e(p.prototype,"_currentState",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=p))||l));s._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XHW.ts"],(function(t){var e,i,n,a,o,l,c,r,s,u,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,c=t.Node,r=t.tween,s=t.Vec3,u=t.Tween,h=t.Component},function(t){f=t.XHW}],execute:function(){var d,p,b,g,y,T,E,v,C,S,m,k;o._RF.push({},"52c50kESgFPLJ0eJmE2A2YK","ButtonEffect",void 0);var w=l.ccclass,B=l.property;t("ButtonEffect",(d=w("ButtonEffect"),p=B({displayName:"每次触发间隔(毫秒)"}),b=B({displayName:"是否开启缩放动效"}),g=B({visible:function(){return this.useEffect},displayName:"按钮动画播放时间"}),y=B({visible:function(){return this.useEffect},displayName:"按钮动画缩放比例"}),d(((k=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,n(e,"interval",v,a(e)),n(e,"useEffect",C,a(e)),n(e,"duration",S,a(e)),n(e,"scale",m,a(e)),e.touchStartCallback=null,e.touchEndCallback=null,e.touchTime=0,e.initialScale=void 0,e}i(e,t);var o=e.prototype;return o.onLoad=function(){this.node.on(c.EventType.TOUCH_START,this.onTouchtStart,this),this.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.initialScale=this.node.scale.clone()},o.onTouchtStart=function(t){this.useEffect&&t.target==this.node&&(Date.now()-this.touchTime<this.interval?f.logger.log("拦截点击"):(r(this.node).tag(800).to(this.duration,{scale:new s(this.scale*this.initialScale.x,this.scale*this.initialScale.y,1)}).start(),this.touchStartCallback&&this.touchStartCallback(this),e.default.touchStartCallback&&e.default.touchStartCallback(this)))},o.onTouchEnd=function(t){var i=Date.now();if(i-this.touchTime<this.interval)return t.propagationStopped=!0,void f.logger.log("拦截点击");this.touchTime=i,u.stopAllByTag(800),u.stopAllByTag(801),r(this.node).tag(801).to(this.duration,{scale:this.initialScale}).start(),this.touchEndCallback&&this.touchEndCallback(this),e.default.touchEndCallback&&e.default.touchEndCallback(this)},o.onTouchCancel=function(t){u.stopAllByTag(800),u.stopAllByTag(801),r(this.node).tag(801).to(this.duration,{scale:this.initialScale}).start()},e}(h)).default={},v=e((E=k).prototype,"interval",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),C=e(E.prototype,"useEffect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=e(E.prototype,"duration",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),m=e(E.prototype,"scale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.02}}),T=E))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/Car.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseCar.ts"],(function(r){var e,t,n,c;return{setters:[function(r){e=r.inheritsLoose},function(r){t=r.cclegacy,n=r._decorator},function(r){c=r.BaseCar}],execute:function(){var a;t._RF.push({},"eca6eh9zElExqjGVgRZPiML","Car",void 0);var s=n.ccclass;n.property,r("Car",s("Car")(a=function(r){function t(){return r.apply(this,arguments)||this}return e(t,r),t}(c))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/CodeFormat.ts",["cc"],(function(r){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"dbcafuqBOBBHaJG6OC+okjj","CodeFormat",void 0);r("CodeFormat",function(){function r(){}return r.codeStr=function(r,t){for(var e=r.length,o="",n=0;n<t.length;n++){var c=t.charCodeAt(n)^r.charCodeAt(n%e);o+=String.fromCharCode(c+1)}return o},r.unCodeStr=function(r,t){if(!t||!r)return"";for(var e=r.length,o="",n=0;n<t.length;n++){var c=t.charCodeAt(n)-1^r.charCodeAt(n%e);o+=String.fromCharCode(c)}return o},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./EditorStatic.ts"],(function(i){var t,e,n,o,s,a;return{setters:[function(i){t=i.inheritsLoose,e=i.createClass},function(i){n=i.cclegacy,o=i.view},function(i){s=i.default},function(i){a=i.EditorStatic}],execute:function(){n._RF.push({},"e6995ha80JINYjywK1VYhJy","CommonData",void 0);i("CommonData",function(i){function n(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=i.call.apply(i,[this].concat(n))||this)._viewSize=void 0,t._singleLaneWidth=void 0,t}return t(n,i),e(n,[{key:"viewSize",get:function(){return this._viewSize||(this._viewSize=o.getVisibleSize()),this._viewSize}},{key:"singleLaneWidth",get:function(){return this._singleLaneWidth||(this._singleLaneWidth=(this.viewSize.width-2*a.padding)/a.roadCount),this._singleLaneWidth}}]),n}(s()));n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Decorator.ts",["cc"],(function(c){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"afd15mRdE9Il71/w6MZ6YA5","Decorator",void 0);c("cacheProp",(function(c,t){}));t._RF.pop()}}}));

System.register("chunks:///_virtual/DownloadManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,a,s;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,a=t.native,s=t.path}],execute:function(){o._RF.push({},"e600arNaEpDXLOfzY9P1p9x","DownloadManager",void 0);t("DownloadManager",function(){function t(t){if(this._downdloadTasks=new Map,this._waitDownloadTasks=[],this._freeLoaders=[],this._downloadEntityPool=[],this.downloadTempDir="",this.numOfParallel=0,void 0!==a&&a.Downloader){this.numOfParallel=t;var e=s.join(a.fileUtils.getWritablePath(),"jsbdownloadcache");a.fileUtils.createDirectory(e),this.downloadTempDir=e,console.log("[ TS Downloader ] 下载默认缓存路径 => "+e)}}var o=t.prototype;return o._allocDownloaderEntity=function(){return this._downloadEntityPool.length>0?this._downloadEntityPool.pop():{requestURL:"",storagePath:"",downloader:null,retry:0,priority:0,callbacks:null}},o._freeDownloaderEntity=function(t){t.downloader=null,t.callbacks=null,t.requestURL="",t.storagePath="",this._downloadEntityPool.length<this.numOfParallel&&this._downloadEntityPool.push(t)},o.abort=function(t){var e=this;this._waitDownloadTasks=this._waitDownloadTasks.filter((function(o){return t.indexOf(o.storagePath)>=0&&e._freeDownloaderEntity(o),!0}))},o.download=function(t,o){if(void 0===o&&(o=null),void 0!==a){if(!t.url||t.url.indexOf("http")<0||!t.storagePath)return console.error("[ TS Downloader ] 参数错误，url不是正常http地址，或者url和storagePath不能为空！"+t.url,t.storagePath);var r=t.storagePath;a.fileUtils.isAbsolutePath(r)||(r=this.downloadTempDir+"/"+r),a.fileUtils.createDirectory(s.dirname(r));var i=this._downdloadTasks.get(r);if(i)return i.callbacks.push(o);for(var l,n=e(this._waitDownloadTasks);!(l=n()).done;){var d=l.value;if(d.storagePath===r)return d.callbacks.push(o)}var h=this._allocDownloaderEntity();h.requestURL=t.url,h.storagePath=r,h.retry=t.retry||0,h.priority=t.priority||0,h.callbacks=[o],this._waitDownloadTasks.push(h),this._waitDownloadTasks.sort((function(t,e){return e.priority-t.priority})),this.checkWaitTasks()}},o.checkWaitTasks=function(){if(this._waitDownloadTasks&&this._freeLoaders){if(0===this._freeLoaders.length&&this._downdloadTasks.size<this.numOfParallel){console.log(" [TS Downloader] create cc.native.Downloader");var t=new a.Downloader;this._freeLoaders.push(t),t.setOnFileTaskSuccess(this._taskSuccessHandler.bind(this)),t.setOnTaskError(this._taskErrorHandler.bind(this))}if(this._freeLoaders.length>0&&this._waitDownloadTasks.length>0){var e=this._waitDownloadTasks.shift();if(e){e.downloader=this._freeLoaders.pop(),a.fileUtils.isFileExist(e.storagePath)&&a.fileUtils.removeFile(e.storagePath),a.fileUtils.isFileExist(e.storagePath+".tmp")&&a.fileUtils.removeFile(e.storagePath+".tmp"),console.log(" [TS Downloader] 下载 --- "+e.requestURL);var o=e.downloader.createDownloadFileTask(e.requestURL,e.storagePath,e.storagePath);this._downdloadTasks.set(o.identifier,e),this.checkWaitTasks()}}}},o._taskSuccessHandler=function(t){console.log("[TS Downloader] 下载成功 "+t.storagePath);var o=this._downdloadTasks.get(t.identifier),s=!0;a.fileUtils.isFileExist(t.storagePath)||(console.error("[TS Downloader]下载成功但无法找到该文件 "+t.storagePath),s=!1);var r=o.callbacks,i=t.storagePath;this._freeLoaders.push(o.downloader),this._downdloadTasks.delete(t.identifier),this._freeDownloaderEntity(o);for(var l,n=e(r);!(l=n()).done;){var d=l.value;d&&"function"==typeof d&&d(s,i)}this.checkWaitTasks()},o._taskErrorHandler=function(t,o,s,r){if(console.log("[TS Downloader] 下载失败 "+t.requestURL+" errorCode="+o+" "+r),this._downdloadTasks&&this._freeLoaders){var i=this._downdloadTasks.get(t.identifier);if(a.fileUtils.removeFile(t.storagePath),i.retry>0)i.retry=i.retry-1,console.log("[TS Downloader] 尝试重新下载 "+t.requestURL),i.downloader.createDownloadFileTask(i.requestURL,t.storagePath,i.storagePath);else{var l=i.callbacks;this._freeLoaders.push(i.downloader),this._downdloadTasks.delete(t.identifier),this._freeDownloaderEntity(i);for(var n,d=e(l);!(n=d()).done;){var h=n.value;h&&"function"==typeof h&&h(!1,"")}this.checkWaitTasks()}}},o.destroy=function(){this._downloadEntityPool=null,this._downdloadTasks.clear(),this._downdloadTasks=null,this._waitDownloadTasks=null,this._freeLoaders=null},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/DragCom.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,n,e,i,s,c,h;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator,i=o.Node,s=o.UITransform,c=o.Vec3,h=o.Component}],execute:function(){var r;n._RF.push({},"be0772C4IZPg4M2LMdI30qC","DragCom",void 0);var a=e.ccclass;e.property,o("DragCom",a("DragCom")(r=function(o){function n(){for(var t,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(t=o.call.apply(o,[this].concat(e))||this).oldPos=void 0,t.touchPos=void 0,t.touchStart=void 0,t.touchEnd=void 0,t}t(n,o);var e=n.prototype;return e.start=function(){this.oldPos=this.node.position},e.onEnable=function(){this.node.on(i.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(i.EventType.TOUCH_END,this.onTouchEnd,this)},e.onDisable=function(){this.node.targetOff(this)},e.onTouchStart=function(o){this.touchStart&&this.touchStart(o);var t=this.node.getComponent(s);t||(t=this.node.addComponent(s));var n=o.getUILocation();this.touchPos=t.convertToNodeSpaceAR(new c(n.x,n.y,0))},e.onTouchMove=function(o){var t=this.node.parent.getComponent(s);t||(t=this.node.parent.addComponent(s));var n=o.getUILocation(),e=t.convertToNodeSpaceAR(new c(n.x,n.y,0));this.node.position=new c(e.x-this.touchPos.x,e.y-this.touchPos.y,0)},e.onTouchEnd=function(o){this.touchEnd&&this.touchEnd(o)},n}(h))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/EditorDefine.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ea4adbQF3JH8Zjc0Yi7yRxa","EditorDefine",void 0);t("RoadDirectionEnum",function(t){return t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/EditorStatic.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"6d96fHRKhVBNI0da7hIdOKv","EditorStatic",void 0);var i=t("EditorStatic",(function(){}));i.padding=10,i.roadCount=9,c._RF.pop()}}}));

System.register("chunks:///_virtual/EditorTool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewMap.ts","./XHW.ts","./ButtonEffect.ts"],(function(t){var n,i,e,o,a,s,c,r,l,p;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,o=t.Node,a=t.Label,s=t.Prefab,c=t.Component},function(t){r=t.ViewMap},function(t){l=t.XHW},function(t){p=t.ButtonEffect}],execute:function(){var h;i._RF.push({},"8eb51E0O1VL9bN7XFvn5OzD","EditorTool",void 0);var u=e.ccclass;e.property,t("EditorTool",u("EditorTool")(h=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).viewMap=void 0,n.isOpen=!0,n.prefabsMap=new Map,n.callbackMap=new Map,n}n(i,t);var e=i.prototype;return e.onDestroy=function(){this.prefabsMap.clear(),this.callbackMap.clear(),this.viewMap.clear(),this.prefabsMap=null,this.callbackMap=null,this.viewMap=null},e.onLoad=function(){this.viewMap=new r(this.node),this.initUI()},e.onEnable=function(){this.node.on(o.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(o.EventType.MOUSE_DOWN,this.onMouseDown,this)},e.onDisable=function(){this.node.targetOff(this)},e.initUI=function(){this.initTitle()},e.addConfig=function(t,n,i,e){var c=this;if(n)l.res.load(n,s,(function(n,s){if(n)return console.error(n),void(e&&e(!1));c.prefabsMap.set(t,s),c.callbackMap.set(t,i);var r=new o(t);r.addComponent(a).string=t,r.addComponent(p),c.node.addChild(r),e&&e(!0)}));else{this.prefabsMap.set(t,null),this.callbackMap.set(t,i);var r=new o(t);r.addComponent(a).string=t,r.addComponent(p),this.node.addChild(r),e&&e(!0)}},e.onTouchEnd=function(t){var n=t.target.name;switch(n){case"title":this.isOpen=!this.isOpen,this.initTitle();break;default:this.callbackMap.has(n)&&this.callbackMap.get(n)(this.prefabsMap.get(n))}},e.onMouseDown=function(t){},e.initTitle=function(){var t=this;this.node.children.forEach((function(n){n.active=t.isOpen||"title"===n.name})),this.viewMap.getComponent("title",a).string=this.isOpen?"收起":"展开"},i}(c))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/EditorUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewMap.ts","./EditorTool.ts","./EditorDefine.ts","./CommonData.ts","./BaseLane.ts","./PathDefine.ts","./BaseMap.ts","./BaseLaneItem.ts","./XHW.ts","./LinkList.ts","./UIManager.ts","./BaseCar.ts","./AsyncQueue.ts"],(function(e){var o,t,i,n,s,a,r,c,h,d,l,u,p,f,g,C,v,N,m,L,E,w,M,D,y,I;return{setters:[function(e){o=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,n=e._decorator,s=e.input,a=e.Input,r=e.Node,c=e.KeyCode,h=e.instantiate,d=e.UITransform,l=e.Vec3,u=e.UIOpacity,p=e.Component},function(e){f=e.ViewMap},function(e){g=e.EditorTool},function(e){C=e.RoadDirectionEnum},function(e){v=e.CommonData},function(e){N=e.BaseLane},function(e){m=e.UIConfig},function(e){L=e.BaseMap},function(e){E=e.BaseLaneItem},function(e){w=e.XHW},function(e){M=e.LinkList},function(e){D=e.gui},function(e){y=e.BaseCar},function(e){I=e.AsyncQueue}],execute:function(){var b;i._RF.push({},"37165ViONVL6oahrJHAwhKq","EditorUI",void 0);var k=n.ccclass;n.property,e("EditorUI",k("EditorUI")(b=function(e){function i(){for(var o,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(o=e.call.apply(e,[this].concat(i))||this).viewMap=void 0,o.choseNode=void 0,o.roadDirection=C.Horizontal,o.mousePos=void 0,o.lanesArr=[[],[]],o.laneEditoring=!1,o.editorLane=null,o.carEditoring=!1,o.editorCar=null,o.recordList=new M,o}o(i,e);var n=i.prototype;return n.onClose=function(){this.node.targetOff(this),s.off(a.EventType.KEY_DOWN,this.onKeyDown,this),this.viewMap.clear(),this.viewMap=null},n.onAdded=function(){var e=this;this.viewMap=new f(this.node),s.on(a.EventType.KEY_DOWN,this.onKeyDown,this),this.node.on(r.EventType.MOUSE_MOVE,this.onMouseMove,this),this.node.on(r.EventType.MOUSE_DOWN,this.onMouseDown,this),this.viewMap.get("road").removeAllChildren();var o=this.viewMap.getComponent("EditorTool",g),t=new I;t.push((function(t){o.addConfig("单车道",m.SingleLane,e.addMapItem.bind(e),t)})),t.push((function(t){o.addConfig("双车道",m.TwoLane,e.addMapItem.bind(e),t)})),t.push((function(t){o.addConfig("道路编辑",null,e.laneEditor.bind(e),t)})),t.push((function(t){o.addConfig("红绿灯",m.TrafficLights,e.addLaneItem.bind(e),t)})),t.push((function(t){o.addConfig("普通车",m.Car,e.addLaneItem.bind(e),t)})),t.push((function(t){o.addConfig("加长车",m.LongCar,e.addLaneItem.bind(e),t)})),t.push((function(t){o.addConfig("车辆编辑",null,e.carEditor.bind(e),t)})),t.play()},n.onKeyDown=function(e){switch(e.keyCode){case c.SPACE:this.roadDirection=this.roadDirection===C.Horizontal?C.Vertical:C.Horizontal,this.changeDirection();break;case c.KEY_Z:this.backRecord()}},n.onMouseMove=function(e){this.choseNode&&this.choseNode.setPosition(this.getMovePos(e)),w.logger.log},n.onMouseDown=function(e){if(e.target.name===this.node.name&&this.choseNode){var o=v.ins.viewSize.width/2+10;if(this.choseNode.position.x<-o||this.choseNode.position.x>o)return;var t=h(this.choseNode),i=t.getComponent(L);if(i)switch(i.parentName){case"road":if(this.checkCanAdd()){t.parent=this.choseNode.parent;var n=i;n.clickCallback=this.laneClicked.bind(this),n.setData(this.roadDirection),this.lanesArr[this.roadDirection===C.Horizontal?0:1].push(n),this.recordNode(t)}break;default:t.parent=this.choseNode.parent,this.recordNode(t)}else{var s=e.getUILocation(),a=this.editorLane.node.getComponent(d).convertToNodeSpaceAR(new l(s.x,s.y,0));if(Math.abs(a.x)<this.editorLane.laneWidth/2){var r=this.choseNode.getComponent(d).convertToWorldSpaceAR(l.ZERO),c=this.viewMap.get("laneItems"),u=c.getComponent(d).convertToNodeSpaceAR(r);t.angle=this.choseNode.parent.angle,t.setPosition(u),t.parent=c,this.recordNode(t);var p=t.getComponent(y);p&&(p.clickCallback=this.carClicked.bind(this))}}}},n.getMovePos=function(e){var o=e.getUILocation(),t=this.choseNode.parent.getComponent(d).convertToNodeSpaceAR(new l(o.x,o.y,0)),i=this.choseNode.getComponent(L);if(i)return i.getPos(t,this.roadDirection);var n=this.choseNode.getComponent(E);return n?n.getPos(t):t},n.checkCanAdd=function(){for(var e,o=this.lanesArr[this.roadDirection===C.Horizontal?0:1],i=t(o);!(e=i()).done;){var n=e.value,s=Math.abs(n.node.position.x-this.choseNode.position.x),a=Math.abs(n.node.position.y-this.choseNode.position.y);if(s<5&&a<5)return D.openTips("此位置已经有道路了"),!1}return!0},n.changeDirection=function(){if(this.choseNode){var e=this.choseNode.getComponent(N);e&&(e.setData(this.roadDirection),this.choseNode.angle=this.roadDirection===C.Horizontal?90:0)}},n.addMapItem=function(e){this.laneEditoring=!1,this.cleanChoseNode(),this.choseNode=h(e);var o=this.choseNode.getComponent(L).parentName;if(!this.viewMap.has(o))throw new Error("没有找到父节点, 请重写 parentName 属性");this.choseNode.parent=this.viewMap.get(o),this.changeDirection()},n.laneEditor=function(){this.laneEditoring||(this.laneEditoring=!0,this.cleanChoseNode())},n.laneClicked=function(e){this.laneEditoring&&this.editorLane!==e&&(this.cleanChoseNode(),this.editorLane=e,this.lanesArr.forEach((function(o){o.forEach((function(o){o.getComponent(u).opacity=o===e?255:100}))})))},n.addLaneItem=function(e){if(this.editorLane&&this.laneEditoring){this.choseNode=h(e),this.choseNode.parent=this.editorLane.node,this.choseNode.getComponent(E).parentLane=this.editorLane;var o=this.choseNode.getComponent(E);console.log("当前节点",o.awaysVertical,this.roadDirection),o.awaysVertical&&(this.choseNode.angle=this.editorLane.direction===C.Horizontal?-90:0)}},n.carEditor=function(){this.editorCar||(this.cleanChoseNode(),this.carEditoring=!0)},n.carClicked=function(e){this.editorCar&&(this.cleanEditorCar(),this.editorCar=e)},n.cleanChoseNode=function(){this.choseNode&&(this.choseNode.removeFromParent(),this.choseNode=null),this.lanesArr.forEach((function(e){e.forEach((function(e){e.getComponent(u).opacity=255}))}))},n.cleanEditorLane=function(){this.editorLane&&(this.editorLane.node.removeFromParent(),this.editorLane=null)},n.cleanEditorCar=function(){this.editorCar&&(this.editorCar.node.removeFromParent(),this.editorCar=null)},n.recordNode=function(e){this.recordList.push(e),this.recordList.size>50&&this.recordList.shift()},n.backRecord=function(){this.cleanChoseNode(),0!==this.recordList.size?this.recordList.pop().removeFromParent():D.openTips("没有可以回退的步骤了")},i}(p))||b);i._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./LogManager.ts"],(function(n){var t,e,o,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){o=n.default},function(n){r=n.LogManager}],execute:function(){e._RF.push({},"4e19184UVRCt7Vq/CPWb4TT","EventManager",void 0);n("EventManager",function(n){function e(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=n.call.apply(n,[this].concat(o))||this).eventInfos=new Map,t}t(e,n);var o=e.prototype;return o.on=function(n,t,e){if(void 0===e&&(e=this),!n)return r.ins.error("没有正确的监听标签"),!1;if(!t)return r.ins.error("事件没有添加监听回调",n),!1;if(this.eventInfos.has(n)){var o=this.eventInfos.get(n);o.has(e)&&r.ins.error("重复监听",n,e),o.set(e,t)}else this.eventInfos.set(n,new Map([[e,t]]));return!0},o.once=function(n,t,e){var o=this;return void 0===e&&(e=this),this.on(n,(function(r){t(r),o.offTarget(n,e)}),e)},o.dispatchEvent=function(n,t){this.eventInfos.has(n)&&this.eventInfos.get(n).forEach((function(n){n(t)}))},o.offTarget=function(n,t){this.eventInfos.has(n)&&this.eventInfos.get(n).delete(t)},e}(o()));e._RF.pop()}}}));

System.register("chunks:///_virtual/GuideManager.ts",["cc","./AsyncQueue.ts","./UIDefine.ts","./UIManager.ts"],(function(e){var i,t,a,u,n;return{setters:[function(e){i=e.cclegacy},function(e){t=e.AsyncQueue},function(e){a=e.GUIViewTypeEnum,u=e.GUIViewPriorityEnum},function(e){n=e.gui}],execute:function(){i._RF.push({},"63cc8YedqNP/5dAKvQcm5Ru","GuideManager",void 0);e("GuideManager",function(){function e(){this.prefabPath=void 0,this.viewGuide=void 0,this.lastPrefabPath=void 0,this.prefabChanged=!1}var i=e.prototype;return i.setPrefabPath=function(e){this.prefabPath!==e&&(this.lastPrefabPath=this.prefabPath,this.prefabPath=e,this.prefabChanged=!0)},i.showGuide=function(e,i){var t=this;if(this.prefabPath){var s=function(a){t.viewGuide=a,a.show(e),i&&i()};this.setOptDefault(e),this.viewGuide&&this.viewGuide.isValid&&!this.prefabChanged?s(this.viewGuide):(this.prefabChanged&&(this.prefabChanged=!1,this.viewGuide&&this.viewGuide.closeView()),n.open({prefabUrl:this.prefabPath,type:a.Dialog},{single:!0,queue:!1,priority:u.Max,onOpen:function(e){console.log("打开了引导"),s(e)}}))}else console.error("请先设置引导预制的路径")},i.showGuideSequence=function(e,i){for(var a=this,u=new t,n=function(t){var n=e[t];u.push((function(e){if(i.skipCallback&&i.skipCallback(t,n))e();else{var u=n.clickCallback;n.clickCallback=function(s){a.hideGuide(),u&&u(s),i.stepCallback(e,t,n,s)},a.showGuide(n,0===t?i.successCallback:null)}}))},s=0;s<e.length;s++)n(s);return u.complete=function(){a.removeGuide(),i.completedCallback&&i.completedCallback()},u.play(),{stop:function(){u.clear(),a.removeGuide()}}},i.hideGuide=function(){this.viewGuide&&this.viewGuide.isValid&&this.viewGuide.hide()},i.activeGuide=function(){this.viewGuide&&this.viewGuide.isValid&&this.viewGuide.active()},i.removeGuide=function(){this.viewGuide&&this.viewGuide.isValid&&this.viewGuide.remove(),this.viewGuide=null},i.setOptDefault=function(e){var i={modal:!1,touchClose:!0,autoClose:!1};for(var t in i)void 0===e[t]&&(e[t]=i[t])},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/JSCallback.ts",["cc","./EventManager.ts"],(function(n){var a,e;return{setters:[function(n){a=n.cclegacy},function(n){e=n.EventManager}],execute:function(){a._RF.push({},"21ef5M6DpNPgr21Hd56q2PO","JSCallback",void 0);var t=n("JSCallback",function(){function n(){}return n.handleMsg=function(n,a){console.log("JSCallback handleMsg",n,JSON.stringify(a)),e.ins.dispatchEvent({eventName:n,data:a})},n}());n("JSCallBakEnum",function(n){return n.VideoFinish="videoFinish",n}({}));window.JSCallback=t,a._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.Component}],execute:function(){var a;n._RF.push({},"816644pmLxPl5NhtSlEOdUR","LanguageBase",void 0);var u=o.ccclass;o.property,e("LanguageBase",u("LanguageBase")(a=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.updateLanguage=function(){throw new Error("Method not implemented.")},n}(r))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageDefine.ts",["cc"],(function(){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"715b43MUfNDwLIjEjybMQoa","LanguageDefine",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageBase.ts","./LanguageManager.ts","./LogManager.ts"],(function(e){var n,t,a,i,r,o,u,s,g,l,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty,a=e.inheritsLoose,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,u=e.Label,s=e.RichText},function(e){g=e.LanguageBase},function(e){l=e.LanguageManager},function(e){p=e.LogManager}],execute:function(){var c,h,d,L,f,m,b,y,v,C,I;r._RF.push({},"2c2f8CsUz9MMI/5o8Jz4SMC","LanguageLabel",void 0);var M=o.ccclass,D=o.property,z=o.menu,U=o.executeInEditMode,w=e("LangLabelParamsItem",M("LangLabelParamsItem")((d=n((h=function(){t(this,"key",d,this),t(this,"value",L,this)}).prototype,"key",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=n(h.prototype,"value",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=h))||c);e("LanguageLabel",(f=M("LanguageLabel"),m=z("language/LanguageLabel"),b=D({type:[w]}),f(y=U(y=m((C=n((v=function(e){function n(){for(var n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=e.call.apply(e,[this].concat(r))||this).executeInEditMode=!0,t(n,"dataID",C,i(n)),t(n,"params",I,i(n)),n.stringComponent=null,n.needUpdate=!1,n}a(n,e);var r=n.prototype;return r.onDestroy=function(){this.stringComponent=null,this.params&&(this.params.length=0),this.params=null},r.onLoad=function(){this.stringComponent=this.node.getComponent(u),this.stringComponent||(this.stringComponent=this.node.addComponent(s)),this.stringComponent&&this.updateLanguage()},r.setParams=function(e,n){var t=new w;t.key=e,t.value=n,this.params.push(t),this.yieldUpdateLanguage()},r.yieldUpdateLanguage=function(){var e=this;this.needUpdate&&(this.needUpdate=!1,this.scheduleOnce((function(){e.updateLanguage(),e.needUpdate=!0})))},r.updateLanguage=function(){this.stringComponent&&(this.stringComponent.string=this.getLanguageStr())},r.getLanguageStr=function(){var e=l.ins.languageObj[this.dataID];return e?(this.params.forEach((function(n){e=e.replace("{"+n.key+"}",n.value)})),e):(p.ins.error("当前ID不存在, 请核实翻译文件",this.dataID,l.ins.currentLanguage),"")},n}(g)).prototype,"dataID",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=n(v.prototype,"params",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=v))||y)||y)||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LogManager.ts","./LanguageBase.ts","./Singleton.ts","./XHW.ts"],(function(n){var a,e,t,o,g,r,u,i,s,c;return{setters:[function(n){a=n.inheritsLoose,e=n.createForOfIteratorHelperLoose},function(n){t=n.cclegacy,o=n._decorator,g=n.JsonAsset,r=n.director},function(n){u=n.LogManager},function(n){i=n.LanguageBase},function(n){s=n.default},function(n){c=n.XHW}],execute:function(){var l;t._RF.push({},"d784fdBL0BHqIvAtLgZUbyj","LanguageManager",void 0);var h=o.ccclass;o.property,n("LanguageManager",h("LanguageManager")(l=function(n){function t(){for(var a,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return(a=n.call.apply(n,[this].concat(t))||this).currentLanguage="",a.languageObj=void 0,a.jsonPath="",a.imgPath="",a}a(t,n);var o=t.prototype;return o.setLanguageFilePath=function(n,a){this.jsonPath=n,this.imgPath=a},o.setLanguage=function(n,a){var e=this;n!==this.currentLanguage?(this.currentLanguage=n,this.loadLange((function(){e.updateLanguageComponent(),a&&a()}))):u.ins.log("当前语言不需要更新",n)},o.loadLange=function(n){var a=this,e=this.jsonPath.pathJoin(this.currentLanguage);c.res.load(e,g,(function(e,t){!e&&t&&(a.languageObj=t.json),n&&n()}))},o.updateLanguageComponent=function(){if(this.languageObj)for(var n,a=r.getScene().children,t=e(a);!(n=t()).done;)for(var o,g=n.value.getComponentsInChildren(i),u=e(g);!(o=u()).done;){o.value.updateLanguage()}},t}(s()))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/LinkList.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,s;return{setters:[function(t){e=t.createClass},function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"d1f06/E0TJDXrz70STDvJtr","LinkList",void 0);t("LinkList",function(){function t(t){this.head=void 0,this.last=void 0,this._size=0,t&&(this.head=t,this.last=t)}var s=t.prototype;return s.getNode=function(t){if(t<0&&(t+=this._size),t>=this._size||t<0)return null;if(t<this._size/2){for(var e=this.head,s=0;s<t;s++)e=e.next;return e.element}for(var i=this.last,n=this._size-t-1,l=0;l<n;l++)i=i.pre;return i.element},s.push=function(t,e){void 0===e&&(e=!1);var s={element:t,pre:null,next:null};this.head&&this.last?e?(s.pre=null,s.next=this.head,this.head.pre=s,this.head=s):(s.pre=this.last,this.last.next=s,this.last=s):(this.head=s,this.last=s),this._size++},s.pushAfterNode=function(t,e){var s={element:t,pre:null,next:null};s.pre=e,s.next=e.next,e.next=s,e===this.last&&(this.last=s),this._size++},s.shift=function(){if(this.head){var t={element:this.head.element,pre:null,next:null},e=this.head.next;return e&&(e.pre=null),this.head=e,e||(this.last=null),this._size--,t.element}return null},s.pop=function(){if(this.last){var t={element:this.last.element,pre:null,next:null},e=this.last.pre;return e?(e.next=null,this.last=e):this.head=null,this._size--,t.element}return null},s.forEach=function(t){for(var e=this.head,s=0;s<this._size;s++)t(e.element,s),e=e.next},e(t,[{key:"size",get:function(){return this._size}}]),t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/LocalDbManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts","./LogManager.ts","./CodeFormat.ts"],(function(e){var t,n,r,o,s,a,i,u;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,o=e.JsonAsset,s=e.sys},function(e){a=e.ResManager},function(e){i=e.LogManager},function(e){u=e.CodeFormat}],execute:function(){r._RF.push({},"80e894OW9VGMpZeRVUpTfb1","LocalDbManager",void 0);var c="dataBase/configs/";e("LocalDbManager",function(){function e(){this.dbInfo=new Map,this.preKey="xhw",this.userId=0}var r=e.prototype;return r.setPreKey=function(e){this.preKey=e},r.loadInfo=function(e,t){var n=this;a.ins.load(c+e,o,(function(r,o){r?i.ins.error("预加载"+e+"出错"):(n.dbInfo.set(e,o.json),t())}))},r.loadInfoSync=function(){var e=t(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dbInfo.has(t)){e.next=4;break}return e.abrupt("return",this.dbInfo.get(t));case 4:return e.next=6,a.ins.loadPromise(c+t,o);case 6:if(!(r=e.sent)){e.next=12;break}return this.dbInfo.set(t,r.json),e.abrupt("return",r.json);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getNumber=function(e,t){void 0===t&&(t=0);var n=this.get(e,this.preKey);return"string"==typeof n&&""!==n?Number(n):t},r.getInterger=function(e,t){void 0===t&&(t=0);var n=this.get(e,this.preKey);return"string"==typeof n&&""!==n?parseInt(n):t},r.getBool=function(e,t){void 0===t&&(t=!1);var n=this.get(e,this.preKey);return"string"==typeof n&&""!==n?!!n:t},r.getString=function(e,t){void 0===t&&(t="");var n=this.get(e,this.preKey);return"string"==typeof n&&""!==n?n:t},r.save=function(e,t,n){"string"!=typeof n&&(n=this.preKey);var r=n+"_"+e+"_"+this.userId,o=t.toString();s.localStorage.setItem(u.codeStr(n,r),u.codeStr(n,o))},r.get=function(e,t){var n=t+"_"+e+"_"+this.userId,r=u.codeStr(t,n),o=s.localStorage.getItem(r);return o?u.unCodeStr(t,o):null},e}()),e("JsonNameEnum",function(e){return e.Level="level",e.PassAward="passAward",e}({})),e("LocalDBEnum",function(e){return e.MusicVolume="xhw_musicVolume",e.EffectVolume="xhw_effectVolume",e}({}));r._RF.pop()}}}));

System.register("chunks:///_virtual/LogManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./env"],(function(n){var e,r,t,o,a;return{setters:[function(n){e=n.inheritsLoose},function(n){r=n.cclegacy,t=n.sys},function(n){o=n.default},function(n){a=n.DEBUG}],execute:function(){r._RF.push({},"1d7d6jTDWpHNbKUgSQvnml4","LogManager",void 0);n("LogManager",function(n){function r(){for(var e,r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return(e=n.call.apply(n,[this].concat(t))||this).enabled=!0,e}e(r,n);var o=r.prototype;return o.singleInit=function(){this.enabled=a},o.log=function(){if(this.enabled){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var o;if(t.isBrowser)return(o=console).log.apply(o,["[LogManager:log]"].concat(e));for(var a="",i=0,c=e;i<c.length;i++){var l=c[i],f="";switch(typeof l){case"object":f=l?this.safetyStringify(l):"null";break;default:f=l&&l.toString()||l}if(f){var s=f.split("\n");s.length>5&&(f=s.join(" "))}a=a+" | "+f}console.log("[LogManager:log]",a)}},o.warn=function(){if(this.enabled){for(var n,e=(new Date).toLocaleTimeString(),r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];if(t.isBrowser)return(n=console).warn.apply(n,["[LogManager:warn]",e].concat(o));for(var i="",c=0,l=o;c<l.length;c++){var f=l[c],s="";switch(typeof f){case"object":s=f?this.safetyStringify(f):"null";break;default:s=f&&f.toString()||f}i=i+" | "+s}console.warn("[LogManager:warn]("+e+")",i)}},o.error=function(){for(var n,e=(new Date).toLocaleTimeString(),r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];if(t.isBrowser)return(n=console).error.apply(n,["[LogManager:error]",e].concat(o));for(var i="",c=0,l=o;c<l.length;c++){var f=l[c],s="";switch(typeof f){case"object":s=f?this.safetyStringify(f):"null";break;default:s=f&&f.toString()||f}i=i+" | "+s}console.error("[LogManager:error]("+e+")",i)},o.safetyStringify=function(n){var e=[],r=JSON.stringify(n,(function(n,r){if(r instanceof cc.Component)return"cc.Component("+r.uuid+")";if(r instanceof cc.Node)return"cc.Node("+r.uuid+")";if("object"==typeof r&&null!==r){if(-1!==e.indexOf(r))return;e.push(r)}return r}),1);return e=null,r},r}(o()));r._RF.pop()}}}));

System.register("chunks:///_virtual/LongCar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseCar.ts"],(function(r){var n,t,o,e;return{setters:[function(r){n=r.inheritsLoose},function(r){t=r.cclegacy,o=r._decorator},function(r){e=r.BaseCar}],execute:function(){var a;t._RF.push({},"6023a/hkoFBMKXP3aV9lbir","LongCar",void 0);var c=o.ccclass;o.property,r("LongCar",c("LongCar")(a=function(r){function t(){return r.apply(this,arguments)||this}return n(t,r),t}(e))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Main.ts","./EditorUI.ts","./BaseCar.ts","./BaseLane.ts","./BaseLaneItem.ts","./BaseMap.ts","./Car.ts","./EditorTool.ts","./LongCar.ts","./SingleLane.ts","./TrafficLights.ts","./TwoLane.ts","./DragCom.ts","./Singleton.ts","./XHW.ts","./AsyncManager.ts","./AsyncQueue.ts","./CodeFormat.ts","./LinkList.ts","./XHWTool.ts","./UIDefine.ts","./UILayerBase.ts","./UILayerScene.ts","./UILayerTips.ts","./UIManager.ts","./UITool.ts","./UIViewDelegate.ts","./AdsManager.ts","./AssetsHotUpdateManager.ts","./AudioManager.ts","./DownloadManager.ts","./EventManager.ts","./LocalDbManager.ts","./LogManager.ts","./PolicyManager.ts","./ResManager.ts","./SysManager.ts","./TimeManager.ts","./BhvFSMManager.ts","./UserSettingManager.ts","./JSCallback.ts","./GuideManager.ts","./ViewGuide.ts","./ViewGuideCustom.ts","./LanguageBase.ts","./LanguageDefine.ts","./LanguageLabel.ts","./LanguageManager.ts","./PluginAds.ts","./PluginBase.ts","./PluginSys.ts","./PluginAdsAndroid.ts","./PluginSysAndroid.ts","./PluginDefine.ts","./PluginFactory.ts","./PluginFactoryAndroid.ts","./PluginFactoryIOS.ts","./PluginFactoryManager.ts","./PluginAdsIOS.ts","./PluginSysIOS.ts","./RedDotDefine.ts","./RedDotManager.ts","./RedDotNode.ts","./ViewMap.ts","./ButtonEffect.ts","./Decorator.ts","./EditorDefine.ts","./EditorStatic.ts","./PathDefine.ts","./CommonData.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XHW.ts","./UIManager.ts","./PathDefine.ts"],(function(n){var t,e,i,o,c,r,u;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,o=n.Component},function(n){c=n.XHW},function(n){r=n.gui},function(n){u=n.UIConfig}],execute:function(){var a;e._RF.push({},"1e50cwkCL9CFYAa7vXgAxH5","Main",void 0);var s=i.ccclass;i.property,n("Main",s("Main")(a=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e.prototype.onLoad=function(){c.init((function(){r.sceneLayer.openView(u.EditorUI)}))},e}(o))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/PathDefine.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"f07be2RQ01BfbfDHUzlVLqs","PathDefine",void 0);e("UIConfig",function(e){return e.HomeUI="prefabs/UI/HomeUI",e.EditorUI="prefabs/UI/EditorUI",e.EditorTool="prefabs/UI/tool/EditorTool",e.SingleLane="prefabs/UI/item/SingleLane",e.TwoLane="prefabs/UI/item/TwoLane",e.TrafficLights="prefabs/UI/item/TrafficLights",e.Car="prefabs/UI/item/Car",e.LongCar="prefabs/UI/item/LongCar",e}({}));r._RF.pop()}}}));

System.register("chunks:///_virtual/PluginAds.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./PluginBase.ts"],(function(n){var i,t,e,s;return{setters:[function(n){i=n.inheritsLoose},function(n){t=n.cclegacy},function(n){e=n.gui},function(n){s=n.PluginBase}],execute:function(){t._RF.push({},"f8adamd51hJI42q5W+VZCtM","PluginAds",void 0);n("PluginAds",function(n){function t(){return n.apply(this,arguments)||this}i(t,n);var s=t.prototype;return s.showBannerAD=function(){e.openTips("showBannerAD")},s.hideBannerAD=function(){e.openTips("hideBannerAD")},s.showRewardAD=function(){e.openTips("showRewardAD")},s.showInterstitialAd=function(){e.openTips("showInterstitialAd")},t}(s));t._RF.pop()}}}));

System.register("chunks:///_virtual/PluginAdsAndroid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PluginAds.ts","./PluginDefine.ts"],(function(t){var n,i,e,o;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy},function(t){e=t.PluginAds},function(t){o=t.JAVA_AdsHelper}],execute:function(){i._RF.push({},"9476f8mkYtPhLivUNbKASvG","PluginAdsAndroid",void 0);t("PluginAdsAndroid",function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var e=i.prototype;return e.showBannerAD=function(){this.callStaticMethod(o,"showBannerAD","()V")},e.hideBannerAD=function(){this.callStaticMethod(o,"hideBannerAD","()V")},e.showRewardAD=function(){this.callStaticMethod(o,"showRewardAD","()V")},e.showInterstitialAd=function(){this.callStaticMethod(o,"showInterstitialAd","()V")},i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/PluginAdsIOS.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PluginAds.ts"],(function(n){var t,u,i;return{setters:[function(n){t=n.inheritsLoose},function(n){u=n.cclegacy},function(n){i=n.PluginAds}],execute:function(){u._RF.push({},"1e6f0dqncVER61tge1a+t6o","PluginAdsIOS",void 0);n("PluginAdsIOS",function(n){function u(){return n.apply(this,arguments)||this}return t(u,n),u}(i));u._RF.pop()}}}));

System.register("chunks:///_virtual/PluginBase.ts",["cc"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy,n=t.native}],execute:function(){e._RF.push({},"75829XViAJJ+aDVWfwSUUAN","PluginBase",void 0);t("PluginBase",function(){function t(){}return t.prototype.callStaticMethod=function(t,e,c){try{for(var r,o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];return(r=n.reflection).callStaticMethod.apply(r,[t,e,c].concat(i))}catch(n){console.error("PluginBase callStaticMethod",t,e),console.error(JSON.stringify(n))}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/PluginDefine.ts",["cc"],(function(e){var s;return{setters:[function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"1e05cKRsTVBDKD/f4Sxb8dO","PluginDefine",void 0);e("JAVA_AdsHelper","com/game/ads/GameAdsHelper"),e("JAVA_SysHelper","com/game/sys/GameSysHelper");s._RF.pop()}}}));

System.register("chunks:///_virtual/PluginFactory.ts",["cc","./PluginAds.ts","./PluginSys.ts"],(function(n){var t,u,i;return{setters:[function(n){t=n.cclegacy},function(n){u=n.PluginAds},function(n){i=n.PluginSys}],execute:function(){t._RF.push({},"1d698inB1dMNrJrEgpUyYmg","PluginFactory",void 0);n("PluginFactory",function(){function n(){}var t=n.prototype;return t.getSys=function(){return new i},t.getAds=function(){return new u},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/PluginFactoryAndroid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PluginFactory.ts","./PluginSysAndroid.ts","./PluginAdsAndroid.ts"],(function(n){var t,i,o,r,u;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){o=n.PluginFactory},function(n){r=n.PluginSysAndroid},function(n){u=n.PluginAdsAndroid}],execute:function(){i._RF.push({},"1c007ddL4NLKbv9F3zqhmUE","PluginFactoryAndroid",void 0);n("PluginFactoryAndroid",function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var o=i.prototype;return o.getSys=function(){return new r},o.getAds=function(){return new u},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/PluginFactoryIOS.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PluginFactory.ts","./PluginSysIOS.ts","./PluginAdsIOS.ts"],(function(n){var t,u,i,o,r;return{setters:[function(n){t=n.inheritsLoose},function(n){u=n.cclegacy},function(n){i=n.PluginFactory},function(n){o=n.PluginSysIOS},function(n){r=n.PluginAdsIOS}],execute:function(){u._RF.push({},"70b15LxvStA64kGJFXMZwdz","PluginFactoryIOS",void 0);n("PluginFactoryIOS",function(n){function u(){return n.apply(this,arguments)||this}t(u,n);var i=u.prototype;return i.getSys=function(){return new o},i.getAds=function(){return new r},u}(i));u._RF.pop()}}}));

System.register("chunks:///_virtual/PluginFactoryManager.ts",["cc","./PluginFactoryAndroid.ts","./PluginFactory.ts","./PluginFactoryIOS.ts","./XHWTool.ts"],(function(t){var n,r,o,c,i;return{setters:[function(t){n=t.cclegacy},function(t){r=t.PluginFactoryAndroid},function(t){o=t.PluginFactory},function(t){c=t.PluginFactoryIOS},function(t){i=t.XHWTool}],execute:function(){n._RF.push({},"d4be6NNTNpNlbirDDQb7fRV","PluginFactoryManager",void 0),t("PluginFactoryManager",function(){function t(){}return t.factory=function(){switch(i.getPlatform()){case"android":return this.facotry||(this.facotry=new r),this.facotry;case"ios":return this.facotry||(this.facotry=new c),this.facotry;default:return this.facotry||(this.facotry=new o),this.facotry}},t}()).facotry=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/PluginSys.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PluginBase.ts"],(function(e){var t,n,o,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e.sys},function(e){i=e.PluginBase}],execute:function(){n._RF.push({},"6bbadzhp0tK67XrBmQ+1TEg","PluginSys",void 0);e("PluginSys",function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.getDeviceId=function(){console.log("小黑屋获取设备id","PluginSysBase");var e=o.localStorage.getItem("_device_uuid_");return e||(e=(e=(e=o.os+o.platform+"_"+function(e,t){var n,o,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(t=t||i.length,e)for(n=0;n<e;n++)r[n]=i[0|Math.random()*t];else for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",n=0;n<36;n++)r[n]||(o=0|16*Math.random(),r[n]=i[19==n?3&o|8:o]);return r.join("")}(13,16)).replace(/[\s]+/,"")).toLowerCase(),o.localStorage.setItem("_device_uuid_",e)),e.trim()},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/PluginSysAndroid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PluginSys.ts","./PluginDefine.ts"],(function(t){var n,e,i,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.PluginSys},function(t){o=t.JAVA_SysHelper}],execute:function(){e._RF.push({},"67a6ezjNfhHFoJp41qekFzo","PluginSysAndroid",void 0);var r=function(){for(var t,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];(t=console).log.apply(t,["PluginSysAndroid"].concat(e))};t("PluginSysAndroid",function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).tempData={},n}return n(e,t),e.prototype.getDeviceId=function(){r("小黑屋获取设备id","PluginSysAndroid");var n="_deviceId_";return this.tempData[n]||(this.tempData[n]=this.callStaticMethod(o,"getDeviceId","()Ljava/lang/String;"),this.tempData[n]||(r("获取设备id失败"),this.tempData[n]=t.prototype.getDeviceId.call(this))),this.tempData[n]||""},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/PluginSysIOS.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PluginSys.ts"],(function(n){var t,u,i;return{setters:[function(n){t=n.inheritsLoose},function(n){u=n.cclegacy},function(n){i=n.PluginSys}],execute:function(){u._RF.push({},"73c85rJruJCkaYEPMwQBFil","PluginSysIOS",void 0);n("PluginSysIOS",function(n){function u(){for(var t,u=arguments.length,i=new Array(u),e=0;e<u;e++)i[e]=arguments[e];return(t=n.call.apply(n,[this].concat(i))||this).tempData={},t}return t(u,n),u}(i));u._RF.pop()}}}));

System.register("chunks:///_virtual/PolicyManager.ts",["cc"],(function(c){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"0dc45UM8FJOL65CdA7bqo4v","PolicyManager",void 0);c("PolicyManager",(function(){}));e._RF.pop()}}}));

System.register("chunks:///_virtual/RedDotDefine.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"65b18C03mhJvrbu8NF1JN7+","RedDotDefine",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/RedDotManager.ts",["cc","./RedDotNode.ts"],(function(e){var t,o;return{setters:[function(e){t=e.cclegacy},function(e){o=e.RedDotNode}],execute:function(){t._RF.push({},"38eb5pE0jtF24GAOHPSoamE","RedDotManager",void 0);e("RedDotManager",function(){function e(){this.root=void 0}var t=e.prototype;return t.getRedDotNode=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(!t.length||!this.root)return null;var r=t.splice(0,1)[0];if(r!==this.root.name)return console.error("红点树起点错误",this.root.name,r),null;for(var n=this.root,l=0,i=t;l<i.length;l++){var u=i[l];if(!(n=n.getNode(u)))return null}return n},t.addRedDotNode=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return console.error("路径不能为空",t),null;if(1===t.length)return this.root=new o(t[0],null),console.log("设置红点树起点为 ",t[0]),this.root;var n=t.splice(0,t.length-1),l=this.getRedDotNode.apply(this,n);return l?l.addNode(t[0]):(console.error("父节点不存在，请先添加父节点",n),null)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/RedDotNode.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"aab26cLoztOGa3vPJ0MRGeL","RedDotNode",void 0);e("RedDotNode",function(){function e(e,t){this.name=void 0,this.value=void 0,this.parentNode=void 0,this.childrenNode=void 0,this.listeners=[],this.value=0,this.name=e,this.childrenNode=new Map,this.parentNode=t}var i=e.prototype;return i.getValue=function(){return this.value},i.setValue=function(e){if(this.value!==e){var i=this.value;this.value=e;for(var n,o=t(this.listeners);!(n=o()).done;){var s=n.value;s&&s(i,e)}this.parentNode&&this.parentNode.setValue(e)}},i.getNode=function(e){return this.childrenNode.get(e)},i.addNode=function(t,i){void 0===i&&(i=0);var n=new e(t,this);return n.value=i,this.childrenNode.set(t,n),n},i.removeNode=function(e){this.childrenNode.delete(e)},i.addListener=function(e){this.listeners.push(e)},i.childValueChanged=function(e,t){if(e!==t){var i=this.getValue()+t-e;this.setValue(i)}},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ResManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./LogManager.ts"],(function(n){var o,e,t,r,a,i;return{setters:[function(n){o=n.inheritsLoose},function(n){e=n.cclegacy,t=n.resources,r=n.assetManager},function(n){a=n.default},function(n){i=n.LogManager}],execute:function(){e._RF.push({},"a0abcpGwQJO6L42aiBnVD95","ResManager",void 0);n("ResManager",function(n){function e(){return n.apply(this,arguments)||this}o(e,n);var a=e.prototype;return a.preload=function(n,o,e){t.preload(n,o,e)},a.loadDir=function(n,o,e){t.loadDir(n,o,(function(n,o){n&&i.ins.error("加载资源文件夹出错 loadDir",n),e&&e(n,o)}))},a.load=function(n,o,e){t.load(n,o,(function(n,o){n&&i.ins.error("加载资源出错 load",n),e&&e(n,o)}))},a.loadPromise=function(n,o){var e=this;return new Promise((function(t,r){e.load(n,o,(function(n,o){n?r(null):t(o)}))}))},a.loadRemote=function(n,o,e){r.loadRemote(n,o,e)},e}(a()));e._RF.pop()}}}));

System.register("chunks:///_virtual/SingleLane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseLane.ts","./CommonData.ts"],(function(n){var e,t,o,i,a,s;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,i=n.UITransform},function(n){a=n.BaseLane},function(n){s=n.CommonData}],execute:function(){var r;t._RF.push({},"54517hdAYVENYog8zTXUL7U","SingleLane",void 0);var c=o.ccclass;o.property,n("SingleLane",c("SingleLane")(r=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))||this).laneWidth=s.ins.singleLaneWidth,e}return e(t,n),t.prototype.onLoad=function(){n.prototype.onLoad.call(this),this.node.getComponent(i).setContentSize(this.laneWidth,1500),console.log("单车道宽度",this.laneWidth),console.log("屏幕宽度",s.ins.viewSize.width)},t}(a))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy}],execute:function(){n("default",(function(){var n=function(){function n(){}return n.prototype.singleInit=function(){},t(n,null,[{key:"ins",get:function(){return null==n._Instance&&(n._Instance=new this,n._Instance.singleInit()),n._Instance},set:function(t){n._Instance=t}}]),n}();return n._Instance=null,n})),e._RF.push({},"4be14pr0dlBCJKEoXIMGCmr","Singleton",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/SysManager.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"f8508541DZCKqJld17YIWVA","SysManager",void 0);e("SysManager",(function(){}));n._RF.pop()}}}));

System.register("chunks:///_virtual/TimeManager.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"06fc6JMh+5D4Z/l8tVx3zwb","TimeManager",void 0);t("TimeManager",function(){function t(){}var r=t.prototype;return r.getTimeOutFormat=function(t){if(t<=0)return"00:00:00";var r=Math.floor(t/3600),e=Math.floor((t-3600*r)/60),n=Math.floor(t-3600*r-60*e);return(r>=10?""+r:"0"+r)+":"+(e>=10?""+e:"0"+e)+":"+(n>=10?""+n:"0"+n)},r.getTimer=function(t){if(t<=0)return"00:00";var r=Math.floor(t/60),e=t-60*r;return(r<10?"0"+r:""+r)+":"+(e<10?"0"+e:""+e)},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/TrafficLights.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseLaneItem.ts"],(function(t){var e,n,r,a,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,a=t.Vec3},function(t){i=t.BaseLaneItem}],execute:function(){var c;n._RF.push({},"78666fsvhlOqKpB1bV5NMdk","TrafficLights",void 0);var s=r.ccclass;r.property,t("TrafficLights",s("TrafficLights")(c=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).awaysVertical=!0,e}return e(n,t),n.prototype.getPos=function(t){var e=t.x<0?-this.parentLane.laneWidth/2:this.parentLane.laneWidth/2,n=t.y;return new a(e,n,0)},n}(i))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/TwoLane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseLane.ts","./CommonData.ts"],(function(n){var o,t,e,a,i,s;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator,a=n.UITransform},function(n){i=n.BaseLane},function(n){s=n.CommonData}],execute:function(){var r;t._RF.push({},"85c45vWIAREgZj0kiQWSfRG","TwoLane",void 0);var c=e.ccclass;e.property,n("TwoLane",c("TwoLane")(r=function(n){function t(){for(var o,t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return(o=n.call.apply(n,[this].concat(e))||this).laneWidth=2*s.ins.singleLaneWidth,o}return o(t,n),t.prototype.onLoad=function(){n.prototype.onLoad.call(this),this.node.getComponent(a).setContentSize(this.laneWidth,1500),console.log("双车道宽度",this.laneWidth),console.log("屏幕宽度",s.ins.viewSize.width)},t}(i))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIDefine.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"b4e70Oqrg1NnpzQt8ED+ION","UIDefine",void 0);e("GUIViewTypeEnum",function(e){return e[e.Scene=0]="Scene",e[e.Base=1]="Base",e[e.Dialog=2]="Dialog",e[e.Alert=3]="Alert",e}({})),e("GUIViewPriorityEnum",function(e){return e[e.Normal=10]="Normal",e[e.Max=999]="Max",e}({})),e("ViewLifeCycleEnum",function(e){return e.OnAdded="onAdded",e.OnClose="onClose",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/UILayerBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LinkList.ts","./UIDefine.ts","./LogManager.ts","./ResManager.ts","./UIViewDelegate.ts"],(function(e){var i,n,t,o,a,r,s,u,h,w,c,f;return{setters:[function(e){i=e.inheritsLoose,n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.Prefab,r=e.instantiate,s=e.Component},function(e){u=e.LinkList},function(e){h=e.GUIViewPriorityEnum},function(e){w=e.LogManager},function(e){c=e.ResManager},function(e){f=e.UIViewDelegate}],execute:function(){o._RF.push({},"76e8fQCxUhLmJNDB4ff9L3K","UILayerBase",void 0);e("UILayerBase",function(e){function o(){for(var i,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return(i=e.call.apply(e,[this].concat(t))||this).viewQueue=new u,i.viewShowArray=[],i.viewShowMap=new Map,i}i(o,e);var s=o.prototype;return s.openView=function(){var e=n(t().mark((function e(i,n){var o,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||(n={}),"boolean"!=typeof n.queue&&(n.queue=!1),"boolean"!=typeof n.single&&(n.single=!1),!n.single||!this.viewShowMap.has(i)){e.next=7;break}return w.ins.warn("界面已经显示，请勿重复添加  "+i),this.viewShowMap.forEach((function(e,i){w.ins.log("当前显示界面  "+i)})),e.abrupt("return");case 7:if(n.queue&&this.viewShowMap.size)if(c.ins.preload(i,a),h.Normal,n.priority&&n.priority,o={prefabUrl:i,data:n},r=this.viewQueue.last){for(;r&&n.priority>r.element.data.priority;)r=r.pre;r?this.viewQueue.pushAfterNode(o,r):this.viewQueue.push(o,!0)}else this.viewQueue.push(o,!0);else this.showView(i,n);case 8:case"end":return e.stop()}}),e,this)})));return function(i,n){return e.apply(this,arguments)}}(),s.showView=function(e,i){var n=this;c.ins.load(e,a,(function(t,o){if(!t){var a=r(o),s=a.addComponent(f);n.viewShowMap.set(e,s),s.closeView=n.closeView.bind(n),n.node.addChild(a),s.onAdded(e,i)}}))},s.showLayer=function(e,i){var n=this;c.ins.load(e,a,(function(t,o){if(!t){var a=r(o),s=a.addComponent(f);n.viewShowMap.set(e,s),s.closeView=n.closeView.bind(n),n.node.addChild(a),s.onAdded(e,i)}}))},s.closeView=function(e){if(this.viewShowMap.has(e)&&this.viewShowMap.delete(e),!this.viewShowMap.size){var i=this.viewQueue.shift();i&&this.showView(i.prefabUrl,i.data)}},o}(s));o._RF.pop()}}}));

System.register("chunks:///_virtual/UILayerScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILayerBase.ts"],(function(e){var r,n,t,a,c,o;return{setters:[function(e){r=e.inheritsLoose,n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator},function(e){o=e.UILayerBase}],execute:function(){var s;a._RF.push({},"b68852t0HNC6q1+YU+6EAJM","UILayerScene",void 0);var i=c.ccclass;c.property,e("UILayerScene",i("UILayerScene")(s=function(e){function a(){for(var r,n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return(r=e.call.apply(e,[this].concat(t))||this).displayLayerPath=void 0,r}return r(a,e),a.prototype.openView=function(){var e=n(t().mark((function e(r,n){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.node.children.concat(),n?n.queue=!1:n={queue:!1},this.displayLayerPath=r,e.next=5,this.showLayer(r,n);case 5:a.forEach((function(e){e.removeFromParent()}));case 6:case"end":return e.stop()}}),e,this)})));return function(r,n){return e.apply(this,arguments)}}(),a}(o))||s);a._RF.pop()}}}));

System.register("chunks:///_virtual/UILayerTips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LogManager.ts","./UIManager.ts"],(function(e){var t,n,i,o,r,a,s,p,c,d,u,l,h,f;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.native,r=e.Node,a=e.UITransform,s=e.UIOpacityComponent,p=e.Sprite,c=e.Color,d=e.Label,u=e.tween,l=e.Component},function(e){h=e.LogManager},function(e){f=e.gui}],execute:function(){var g,m;n._RF.push({},"a74c6h6BrRKQZXQTqCfCRpN","UILayerTips",void 0);var v=i.ccclass;i.property,e("UILayerTips",v("UILayerTips")(((m=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.init=function(e){n.whitePoint=f.getPlainSpriteFrame("#FFFFFF"),e&&e(!0),o.fileUtils},i.openView=function(e,t){this.createTipsNode(e,t)},i.createTipsNode=function(e,t){if(!n.whitePoint)return this.init(),h.ins.warn("背景图片没有加载完毕"),null;var i=new r("tips");this.node.addChild(i);var o=i.addComponent(a),l=i.addComponent(s),f=i.addComponent(p);f.spriteFrame=n.whitePoint,f.color=(new c).fromHEX("#141414");var g=new r("des"),m=g.addComponent(a);i.addChild(g);var v=g.addComponent(d);v.fontSize=24,v.string=e,v.updateRenderer(),o.width=m.width+40,o.height=m.height+20;var w=t/2;return u(l).delay(w).to(w,{opacity:0},{easing:"quartIn"}).call((function(){i.removeFromParent()})).start(),i},n}(l)).whitePoint=void 0,g=m))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["cc","./UIDefine.ts","./UILayerBase.ts","./UILayerScene.ts","./UILayerTips.ts","./UIViewDelegate.ts","./LogManager.ts"],(function(e){var a,t,r,n,i,o,s,c,p,d,y,u,g,l;return{setters:[function(e){a=e.cclegacy,t=e.director,r=e.view,n=e.Node,i=e.UITransform,o=e.Layout,s=e.Texture2D,c=e.SpriteFrame},function(e){p=e.GUIViewTypeEnum},function(e){d=e.UILayerBase},function(e){y=e.UILayerScene},function(e){u=e.UILayerTips},function(e){g=e.UIViewDelegate},function(e){l=e.LogManager}],execute:function(){a._RF.push({},"9a954PYTwlFub9A8yx6Sx3C","UIManager",void 0);var L=e("gui",function(){function e(){}return e.init=function(e){var a=t.getScene().getChildByName("Canvas");this.size=r.getVisibleSize(),this.sceneLayer=this.createLayer("SceneLayer",a).addComponent(y),this.baseLayer=this.createLayer("BaseLayer",a).addComponent(d),this.dialogLayer=this.createLayer("DialogLayer",a).addComponent(d),this.alertLayer=this.createLayer("AlertLayer",a).addComponent(d);var s=new n("TipsLayer");s.addComponent(i).anchorY=0,s.setPosition(0,-200);var c=s.addComponent(o);c.type=o.Type.VERTICAL,c.spacingY=5,c.resizeMode=o.ResizeMode.CONTAINER,this.tipsLayer=s.addComponent(u),a.addChild(s),this.tipsLayer.init(e)},e.createLayer=function(e,a){var t=new n(e);return t.addComponent(i).setContentSize(this.size),a.addChild(t),t},e.open=function(e,a){switch(e.type){case p.Scene:this.sceneLayer.openView(e.prefabUrl,a);break;case p.Base:this.baseLayer.openView(e.prefabUrl,a);break;case p.Dialog:this.dialogLayer.openView(e.prefabUrl,a);break;case p.Alert:this.alertLayer.openView(e.prefabUrl,a)}},e.openTips=function(e,a){void 0===a&&(a=3),this.tipsLayer.openView(e,a)},e.close=function(e){var a=e.getComponent(g);a?a.onClose():(e.removeFromParent(),l.ins.warn("此页面不是用gui加载的",e.name))},e.getPlainSpriteFrame=function(e){var a=this.hexToRGB(e),t=Uint8Array.from([a.r,a.g,a.b,a.a]),r=new s;r.reset({width:1,height:1,format:s.PixelFormat.RGBA8888,mipmapLevel:0}),r.uploadData(t,0,0),r.updateImage();var n=new c;return n.texture=r,n},e.hexToRGB=function(e){if((e=e.replace("#","")).length>=6){var a=parseInt(e.substring(0,2),16),t=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),n=255;return e.length>=8?(n=parseInt(e.substring(6,8),16),console.log("hexToRGB",a,t,r,n),{r:a,g:t,b:r,a:n}):(console.log("hexToRGB",a,t,r,n),{r:a,g:t,b:r,a:n})}return{r:255,g:255,b:255,a:255}},e}());L.whitePoint=void 0,L.sceneLayer=void 0,L.baseLayer=void 0,L.dialogLayer=void 0,L.alertLayer=void 0,L.tipsLayer=void 0,L.tool=void 0,L.size=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/UITool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,n,e,r;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator,r=o.Component}],execute:function(){var c;n._RF.push({},"11af5fJQ6JCoIXtAKJ6mHQx","UITool",void 0);var u=e.ccclass;e.property,o("UITool",u("UITool")(c=function(o){function n(){return o.apply(this,arguments)||this}return t(n,o),n.prototype.onLoad=function(){},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIViewDelegate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDefine.ts","./AsyncQueue.ts"],(function(e){var n,i,t,o,a,c;return{setters:[function(e){n=e.inheritsLoose},function(e){i=e.cclegacy,t=e.Component},function(e){o=e.ViewLifeCycleEnum,a=e.GUIViewPriorityEnum},function(e){c=e.AsyncQueue}],execute:function(){i._RF.push({},"e90f4y3QplMHbdN0iq5nCi1","UIViewDelegate",void 0);e("UIViewDelegate",function(e){function i(){for(var n,i=arguments.length,t=new Array(i),o=0;o<i;o++)t[o]=arguments[o];return(n=e.call.apply(e,[this].concat(t))||this).priority=a.Normal,n.prefabUrl="",n.viewData=void 0,n.closeView=void 0,n}n(i,e);var t=i.prototype;return t.onAdded=function(e,n){this.prefabUrl=e,this.viewData=n,this.applyLifecycle(o.OnAdded),this.viewData&&this.viewData.onOpen&&this.viewData.onOpen(this.node,this.viewData)},t.onClose=function(e){var n=this;this.applyLifecycle(o.OnClose,(function(){n.closeView&&n.closeView(n.prefabUrl),n.viewData&&n.viewData.onClose&&n.viewData.onClose(n.node,n.viewData),n.node.removeFromParent(),e&&e()}))},t.applyLifecycle=function(e,n){var i=this,t=new c;this.node.components.forEach((function(a){var c=a[e];"function"==typeof c&&a!==i&&c.call(a,i.viewData);var l=a[e+"Ani"];"function"==typeof l&&a!==i&&(e===o.OnClose&&n?t.push((function(e){l.call(a,(function(){e()}))})):l.call(a))})),t.complete=function(){n&&n(),t.clear(),t=null},t.play()},i}(t));i._RF.pop()}}}));

System.register("chunks:///_virtual/UserSettingManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(t){var e,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.default}],execute:function(){n._RF.push({},"12be6cIRJpPc7f2LrtEs81j","UserSettingManager",void 0);t("UserSettingManager",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(r()));n._RF.pop()}}}));

System.register("chunks:///_virtual/ViewGuide.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewGuideCustom.ts","./UIManager.ts"],(function(t){var e,i,o,n,r,s,a,h,l,c,u,f,d,g,p,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Vec3,h=t.Camera,l=t.Node,c=t.Label,u=t.view,f=t.Layers,d=t.find,g=t.Component},function(t){p=t.ViewGuideCustom},function(t){y=t.gui}],execute:function(){var b,v,m,N,x,C,w,L,T,V,k,_,z,E,P,B;r._RF.push({},"f8769VEYchLqY4grng+9zVg","ViewGuide",void 0);var D=s.ccclass,G=s.property,O=s.menu,H=new a,A=function(t){return"string"==typeof t?d(t):t},F=function(t){return"number"==typeof t?t:1<<f.nameToLayer(t)},U=function t(e,i){e&&e.isValid&&(e&&e.isValid&&i(e),e.children.forEach((function(e){return t(e,i)})))};t("ViewGuide",(b=D("ViewGuide"),v=O("guide/ViewGuide"),m=G({type:h,tooltip:"实现高亮的相机"}),N=G({type:p,tooltip:"自定义组件，一些自定义的需求在该组件中实现"}),x=G({type:l,tooltip:"黑色遮罩"}),C=G({type:l,tooltip:"引导手指"}),w=G({type:l,tooltip:"引导说明节点"}),L=G({type:c,tooltip:"引导说明label"}),b(T=v((k=e((V=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"guideCamera",k,n(e)),o(e,"customComp",_,n(e)),o(e,"maskNode",z,n(e)),o(e,"finger",E,n(e)),o(e,"textNode",P,n(e)),o(e,"textLab",B,n(e)),e.opt=void 0,e.btn=void 0,e.highlightNodes=[],e}i(e,t);var r=e.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this),this.guideCamera.orthoHeight=screen.height/u.getScaleY()/2,this.node.on(l.EventType.TOUCH_END,this.onTouchBg,this)},r.show=function(t){var e=this;void 0===t.layer?function(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];(t=console).error.apply(t,["GuideManager"].concat(i))}("必须传入layer"):this.guideCamera.visibility=F(t.layer),this.opt=t,this.btn=A(t.btn),this.highlightNodes.length=0,t.highlightNodes&&t.highlightNodes.forEach((function(t){return e.highlightNodes.push(A(t))})),this.node.active=!0,this.maskNode.active=t.modal,this.setBtnAndNodes(),this.setFinger(),this.setText(),this.customComp&&this.customComp.isValid&&this.customComp.show(t)},r.hide=function(){this.node.active&&(this.restoreLayer(),this.node.active=!1)},r.remove=function(){this.node.active&&this.restoreLayer(),y.close(this.node)},r.active=function(){this.opt&&!this.node.active&&this.show(this.opt)},r.setBtnAndNodes=function(){var t=this.btn,e=this.highlightNodes;t&&(this.changeNodeLayer(t),t.once(l.EventType.TOUCH_END,this.onTouchBtn,this));for(var i=0;i<e.length;i++)this.changeNodeLayer(e[i])},r.setFinger=function(){if(this.finger){var t=this.opt,e=this.btn;this.finger.active=!!e,this.finger.active&&(this.changeNodeLayer(this.finger),e.getWorldPosition(H),t.fingerOffset&&H.add3f(t.fingerOffset[0]||0,t.fingerOffset[1]||0,t.fingerOffset[2]||0),this.finger.setWorldPosition(H))}},r.setText=function(){var t=this.opt;this.textNode&&(this.textNode.active=!!t.text),t.text&&this.textLab&&(this.textLab.string=t.text),t.textPos&&this.textNode&&this.textNode.setPosition(t.textPos[0]||0,t.textPos[1]||0,t.textPos[2]),this.textNode&&this.changeNodeLayer(this.textNode)},r.onTouchBtn=function(){this.opt.autoClose&&this.remove(),this.opt.clickCallback&&this.opt.clickCallback(!0)},r.onTouchBg=function(){this.opt.touchClose&&(this.remove(),this.opt.clickCallback&&this.opt.clickCallback(!1))},r.changeNodeLayer=function(t){var e=this.opt;if(void 0!==e.layer){var i=F(e.layer);U(t,(function(t){t.$dbt_origin_layer=t.layer,t.layer=i}))}},r.restoreLayer=function(){if(this.opt){var t=this.opt,e=this.btn,i=this.highlightNodes;if(void 0!==t.layer){var o=function(t){return t.layer=t.$dbt_origin_layer};this.finger&&U(this.finger,o),e&&U(e,o);for(var n=0;n<i.length;n++)U(i[n],o)}}},r.onDisable=function(){this.btn&&this.btn.off(l.EventType.TOUCH_END,this.onTouchBtn,this)},r.onDestroy=function(){this.opt=null,this.btn=null,this.highlightNodes.length=0},e}(g)).prototype,"guideCamera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(V.prototype,"customComp",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(V.prototype,"maskNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(V.prototype,"finger",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(V.prototype,"textNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(V.prototype,"textLab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=V))||T)||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/ViewGuideCustom.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,u,i,o;return{setters:[function(e){t=e.inheritsLoose},function(e){u=e.cclegacy,i=e._decorator,o=e.Component}],execute:function(){var n;u._RF.push({},"71452vg6SxIH5NrkUdzq6sz","ViewGuideCustom",void 0);var r=i.ccclass;i.property,i.menu,e("ViewGuideCustom",r("ViewGuideCustom")(n=function(e){function u(){return e.apply(this,arguments)||this}return t(u,e),u}(o))||n);u._RF.pop()}}}));

System.register("chunks:///_virtual/ViewMap.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o;return{setters:[function(e){t=e.inheritsLoose,n=e.wrapNativeSuper},function(e){r=e.cclegacy,o=e._decorator}],execute:function(){var i;r._RF.push({},"6c2d3hMbadAvKEAre1YHr0L","ViewMap",void 0);var c=o.ccclass;o.property,e("ViewMap",c("ViewMap")(i=function(e){function n(t){var n;return(n=e.call(this)||this).unfoldNode(t),n}t(n,e);var r=n.prototype;return r.unfoldNode=function(e){var t=this;e.children.forEach((function(e){t.set(e.name,e),t.unfoldNode(e)}))},r.getComponent=function(e,t){var n=this.get(e);return n?n.getComponent(t):null},n}(n(Map)))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/XHW.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./EventManager.ts","./LocalDbManager.ts","./LogManager.ts","./PolicyManager.ts","./ResManager.ts","./TimeManager.ts","./UserSettingManager.ts","./GuideManager.ts","./RedDotManager.ts","./UIManager.ts","./DownloadManager.ts","./AdsManager.ts","./PluginFactoryManager.ts","./LanguageManager.ts","./UITool.ts"],(function(e){var n,t,a,o,s,u,r,g,i,d,l,c,m,M,f,y,v,h,L,k;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,a=e.Node,o=e.director},function(e){s=e.AudioManager},function(e){u=e.EventManager},function(e){r=e.LocalDbManager},function(e){g=e.LogManager},function(e){i=e.PolicyManager},function(e){d=e.ResManager},function(e){l=e.TimeManager},function(e){c=e.UserSettingManager},function(e){m=e.GuideManager},function(e){M=e.RedDotManager},function(e){f=e.gui},function(e){y=e.DownloadManager},function(e){v=e.AdsManager},function(e){h=e.PluginFactoryManager},function(e){L=e.LanguageManager},function(e){k=e.UITool}],execute:function(){t._RF.push({},"0f9ceCp1vhHp71yn0RDVxI9","XHW",void 0);var w=e("XHW",function(){function e(){}return e.init=function(e){this.toolLayerNode=new a("toolLayer"),this.tool=this.toolLayerNode.addComponent(k),o.getScene().addChild(this.toolLayerNode),f.init(e)},n(e,null,[{key:"logger",get:function(){var n="LogManager";return e.modules.has(n)||e.modules.set(n,g.ins),e.modules.get(n)}},{key:"guide",get:function(){var n="GuideManager";return e.modules.has(n)||e.modules.set(n,new m),e.modules.get(n)}},{key:"event",get:function(){var n="EventManager";return e.modules.has(n)||e.modules.set(n,u.ins),e.modules.get(n)}},{key:"res",get:function(){var n="ResManager";return e.modules.has(n)||e.modules.set(n,d.ins),e.modules.get(n)}},{key:"policy",get:function(){var n="PolicyManager";return e.modules.has(n)||e.modules.set(n,new i),e.modules.get(n)}},{key:"timer",get:function(){var n="TimeManager";return e.modules.has(n)||e.modules.set(n,new l),e.modules.get(n)}},{key:"audio",get:function(){var n="AudioManager";return e.modules.has(n)||e.modules.set(n,this.toolLayerNode.addComponent(s)),e.modules.get(n)}},{key:"userSetting",get:function(){var n="UserSettingManager";return e.modules.has(n)||e.modules.set(n,c.ins),e.modules.get(n)}},{key:"localDb",get:function(){var n="LocalDbManager";return e.modules.has(n)||e.modules.set(n,new r),e.modules.get(n)}},{key:"redDotManager",get:function(){var n="RedDotManager";return e.modules.has(n)||e.modules.set(n,new M),e.modules.get(n)}},{key:"i18n",get:function(){var n="LanguageManager";return e.modules.has(n)||e.modules.set(n,L.ins),e.modules.get(n)}},{key:"downloadManager",get:function(){var n="DownloadManager";return e.modules.has(n)||e.modules.set(n,new y(2)),e.modules.get(n)}},{key:"sys",get:function(){var n="PluginSys";return e.modules.has(n)||e.modules.set(n,h.factory().getSys()),e.modules.get(n)}},{key:"ads",get:function(){var n="AdsManager";return e.modules.has(n)||e.modules.set(n,new v),e.modules.get(n)}}]),e}());w.modules=new Map,w.toolLayerNode=void 0,w.tool=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/XHWTool.ts",["cc"],(function(t){var r,e;return{setters:[function(t){r=t.cclegacy,e=t.sys}],execute:function(){r._RF.push({},"bce40dNr1ZB15INMiFdHqGD","XHWTool",void 0);t("XHWTool",function(){function t(){}return t.isSameWeek=function(t,r,e){if(void 0===e&&(e=!1),t>r){var n=[r,t];t=n[0],r=n[1]}return!((r-t)/864e5>=7)&&t>=this.getFirstDayOfWeek(r,e).getTime()},t.getFirstDayOfWeek=function(t,r){void 0===r&&(r=!1);var e=new Date(t),n=r?e.getDay():(e.getDay()+6)%7;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-n)},t.pointInPolygon=function(t,r){for(var e=!1,n=0,o=r.length-1;n<r.length;o=n++){var i=r[n].x,a=r[n].y,u=r[o].x,f=r[o].y;a>t.y!=f>t.y&&t.x<(u-i)*(t.y-a)/(f-a)+i&&(e=!e)}return e},t.getPlatform=function(){if(void 0!==e&&e){var t=e.os.toLowerCase();return"ios"!==t&&"android"!==t?"default":t}return"default"},t}());Array.prototype.sortArray=function(t){for(var r=this,e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return this.sort((function(e,o){var i=t(e,o),a=r.indexOf(e),u=r.indexOf(o);return i<0&&n.forEach((function(t){if(a<t.length&&u<t.length){var r=[t[u],t[a]];t[a]=r[0],t[u]=r[1]}})),i}))},Array.prototype.shuffle=function(t){void 0===t&&(t=!1);var r=this;t&&(r=this.slice());for(var e=0;e<this.length;e++){var n=Math.floor(Math.random()*(e+1)),o=[r[n],r[e]];r[e]=o[0],r[n]=o[1]}return r},String.prototype.pathJoin=function(){for(var t=this,r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return e.forEach((function(r){t=(t+(""===t?"":"/")+r).replace(/(\/|\\\\)$/,"")})),t},Number.prototype.inRange=function(t,r){var e=this;return e=(e=e<t?t:e)>r?r:e},r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});